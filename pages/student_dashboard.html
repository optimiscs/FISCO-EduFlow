<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学生主页 - 学链通</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Noto Sans SC', sans-serif;
        }

        :root {
            --primary-color: #1A2980;
            --primary-light: #26D0CE;
            --secondary-color: #00d2ff;
            --success-color: #00C853;
            --warning-color: #FF9800;
            --danger-color: #FF5252;
            --dark-color: #333;
            --light-color: #f5f7fa;
            --text-color: #555;
            --border-color: #e4e9f2;
            --shadow-sm: 0 2px 10px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 5px 15px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        body {
            width: 100%;
            min-height: 100vh;
            background-color: var(--light-color);
            color: var(--text-color);
            overflow-x: hidden;
        }

        .dashboard-container {
            display: flex;
            width: 100%;
            min-height: 100vh;
        }

        /* 左侧导航栏 */
        .sidebar {
            width: 240px;
            background: linear-gradient(180deg, var(--primary-color) 0%, #182572 100%);
            color: white;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            overflow-y: auto;
            z-index: 10;
            transition: var(--transition);
        }

        .sidebar-header {
            padding: 20px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background-color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
        }

        .logo-icon svg {
            width: 24px;
            height: 24px;
            fill: var(--primary-color);
        }

        .logo-text {
            font-size: 1.3rem;
            font-weight: 700;
        }

        .nav-menu {
            padding: 15px 0;
        }

        .nav-item {
            list-style: none;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: var(--transition);
            border-left: 3px solid transparent;
        }

        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: white;
        }

        .nav-link.active {
            background-color: rgba(255, 255, 255, 0.05);
            color: white;
            border-left: 3px solid var(--secondary-color);
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            opacity: 0.9;
        }

        /* 主内容区域 */
        .main-content {
            flex: 1;
            margin-left: 240px;
            padding: 0;
            position: relative;
            min-height: 100vh;
        }

        /* 顶部状态栏 */
        .topbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 25px;
            height: 70px;
            background-color: white;
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: 5;
        }

        .page-title {
            font-size: 1.3rem;
            font-weight: 500;
            color: var(--dark-color);
        }

        .user-menu {
            display: flex;
            align-items: center;
        }

        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            cursor: pointer;
            position: relative;
            color: var(--text-color);
            transition: var(--transition);
        }

        .notification-icon:hover {
            background-color: var(--light-color);
            color: var(--primary-color);
        }

        .notification-badge {
            position: absolute;
            top: 0;
            right: 0;
            width: 18px;
            height: 18px;
            background-color: var(--danger-color);
            color: white;
            border-radius: 50%;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-profile {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 10px;
            background-color: var(--light-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--primary-color);
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 500;
            color: var(--dark-color);
            font-size: 0.9rem;
        }

        .user-role {
            font-size: 0.8rem;
            color: var(--text-color);
        }

        /* 内容布局 */
        .content-wrapper {
            padding: 25px;
        }

        .row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -15px;
        }

        .col {
            padding: 0 15px;
            margin-bottom: 25px;
        }

        .col-4 {
            width: 33.333333%;
        }

        .col-6 {
            width: 50%;
        }

        .col-8 {
            width: 66.666667%;
        }

        .col-12 {
            width: 100%;
        }

        /* 卡片组件 */
        .card {
            background-color: white;
            border-radius: 10px;
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            transition: var(--transition);
            height: 100%;
        }

        .card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-3px);
        }

        .card-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark-color);
            margin: 0;
        }

        .card-tools {
            display: flex;
            align-items: center;
        }

        .card-body {
            padding: 20px;
        }

        .card-footer {
            padding: 15px 20px;
            border-top: 1px solid var(--border-color);
            background-color: rgba(0, 0, 0, 0.01);
        }
        
        /* 徽章和标签 */
        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .badge-success {
            background-color: rgba(0, 200, 83, 0.1);
            color: var(--success-color);
        }

        .badge-warning {
            background-color: rgba(255, 152, 0, 0.1);
            color: var(--warning-color);
        }

        .badge-danger {
            background-color: rgba(255, 82, 82, 0.1);
            color: var(--danger-color);
        }

        .badge-primary {
            background-color: rgba(26, 41, 128, 0.1);
            color: var(--primary-color);
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- 左侧导航栏 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M17.13,17C15.92,18.85 14.11,20.24 12,20.92C9.89,20.24 8.08,18.85 6.87,17C6.53,16.5 6.24,16 6,15.47C6,13.82 8.71,12.47 12,12.47C15.29,12.47 18,13.79 18,15.47C17.76,16 17.47,16.5 17.13,17Z"/>
                    </svg>
                </div>
                <span class="logo-text">学链通</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#dashboard" class="nav-link active">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M13,3V9H21V3M13,21H21V11H13M3,21H11V15H3M3,13H11V3H3V13Z" />
                        </svg>
                        <span>仪表盘</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#education" class="nav-link">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z" />
                        </svg>
                        <span>学历信息</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#certificate" class="nav-link">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M4,3C2.89,3 2,3.89 2,5V15A2,2 0 0,0 4,17H12V22L15,19L18,22V17H20A2,2 0 0,0 22,15V8L22,6V5A2,2 0 0,0 20,3H16V3H4M12,5L15,7L18,5V8.5L21,10L18,11.5V15L15,13L12,15V11.5L9,10L12,8.5V5M4,5H9V7H4V5M4,9H7V11H4V9M4,13H9V15H4V13Z" />
                        </svg>
                        <span>证书生成</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#verification" class="nav-link">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z" />
                        </svg>
                        <span>授权管理</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#privacy" class="nav-link">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z" />
                        </svg>
                        <span>隐私设置</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#messages" class="nav-link">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4C22,2.89 21.1,2 20,2Z" />
                        </svg>
                        <span>消息通知</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#settings" class="nav-link">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
                        </svg>
                        <span>账号设置</span>
                    </a>
                </li>
            </ul>
            <div class="sidebar-footer" style="padding: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); margin-top: auto;">
                <a href="../login.html" class="nav-link" style="justify-content: flex-start; padding: 10px 0;">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16,17V14H9V10H16V7L21,12L16,17M14,2A2,2 0 0,1 16,4V6H14V4H5V20H14V18H16V20A2,2 0 0,1 14,22H5A2,2 0 0,1 3,20V4A2,2 0 0,1 5,2H14Z" />
                    </svg>
                    <span>退出登录</span>
                </a>
            </div>
        </aside>

        <!-- 主内容区域 -->
        <main class="main-content">
            <!-- 顶部状态栏 -->
            <div class="topbar">
                <h1 class="page-title">学生主页</h1>
                <div class="user-menu">
                    <div class="notification-icon">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M21,19V20H3V19L5,17V11C5,7.9 7.03,5.17 10,4.29C10,4.19 10,4.1 10,4A2,2 0 0,1 12,2A2,2 0 0,1 14,4C14,4.1 14,4.19 14,4.29C16.97,5.17 19,7.9 19,11V17L21,19M14,21A2,2 0 0,1 12,23A2,2 0 0,1 10,21" />
                        </svg>
                        <div class="notification-badge">3</div>
                    </div>
                    <div class="user-profile">
                        <div class="user-avatar">ZL</div>
                        <div class="user-info">
                            <div class="user-name">张力</div>
                            <div class="user-role">计算机科学与技术 / 本科生</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 内容区域 -->
            <div class="content-wrapper">
                <!-- 仪表盘页面 -->
                <div id="dashboard-content" class="page-content" style="display: block;">
                    <div class="row">
                    <!-- 欢迎卡片 -->
                    <div class="col col-12">
                        <div class="card" style="background: linear-gradient(120deg, var(--primary-color), var(--primary-light)); color: white;">
                            <div class="card-body" style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h2 style="font-size: 1.5rem; margin-bottom: 10px;">欢迎回来，张力！</h2>
                                    <p style="opacity: 0.9; margin-bottom: 15px;">您的学籍信息已完成区块链上链，信息安全可靠。</p>
                                    <div style="display: flex; gap: 10px;">
                                        <button style="background-color: white; color: var(--primary-color); border: none; padding: 8px 15px; border-radius: 5px; font-weight: 500; cursor: pointer;">查看学历证书</button>
                                        <button style="background-color: rgba(255, 255, 255, 0.2); color: white; border: none; padding: 8px 15px; border-radius: 5px; font-weight: 500; cursor: pointer;">隐私设置</button>
                                    </div>
                                </div>
                                <div style="opacity: 0.2;">
                                    <svg viewBox="0 0 24 24" width="120" height="120" fill="currentColor">
                                        <path d="M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 快捷统计卡片 -->
                    <div class="col col-4">
                        <div class="card">
                            <div class="card-body" style="padding: 20px;">
                                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                    <div style="width: 40px; height: 40px; background-color: rgba(26, 41, 128, 0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                        <svg viewBox="0 0 24 24" width="24" height="24" fill="var(--primary-color)">
                                            <path d="M4,3C2.89,3 2,3.89 2,5V15A2,2 0 0,0 4,17H12V22L15,19L18,22V17H20A2,2 0 0,0 22,15V8L22,6V5A2,2 0 0,0 20,3H16V3H4M12,5L15,7L18,5V8.5L21,10L18,11.5V15L15,13L12,15V11.5L9,10L12,8.5V5M4,5H9V7H4V5M4,9H7V11H4V9M4,13H9V15H4V13Z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 style="font-size: 1rem; color: var(--dark-color); margin-bottom: 3px;">学历证书</h3>
                                        <p style="font-size: 0.8rem; color: var(--text-color);">已上链的证书数量</p>
                                    </div>
                                </div>
                                <div style="font-size: 2rem; font-weight: 700; color: var(--primary-color);">2</div>
                            </div>
                        </div>
                    </div>

                    <div class="col col-4">
                        <div class="card">
                            <div class="card-body" style="padding: 20px;">
                                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                    <div style="width: 40px; height: 40px; background-color: rgba(255, 152, 0, 0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                        <svg viewBox="0 0 24 24" width="24" height="24" fill="var(--warning-color)">
                                            <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M17.13,17C15.92,18.85 14.11,20.24 12,20.92C9.89,20.24 8.08,18.85 6.87,17C6.53,16.5 6.24,16 6,15.47C6,13.82 8.71,12.47 12,12.47C15.29,12.47 18,13.79 18,15.47C17.76,16 17.47,16.5 17.13,17Z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 style="font-size: 1rem; color: var(--dark-color); margin-bottom: 3px;">授权管理</h3>
                                        <p style="font-size: 0.8rem; color: var(--text-color);">正在进行的认证</p>
                                    </div>
                                </div>
                                <div style="font-size: 2rem; font-weight: 700; color: var(--warning-color);">1</div>
                            </div>
                        </div>
                    </div>

                    <div class="col col-4">
                        <div class="card">
                            <div class="card-body" style="padding: 20px;">
                                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                    <div style="width: 40px; height: 40px; background-color: rgba(0, 200, 83, 0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                        <svg viewBox="0 0 24 24" width="24" height="24" fill="var(--success-color)">
                                            <path d="M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 style="font-size: 1rem; color: var(--dark-color); margin-bottom: 3px;">已验证</h3>
                                        <p style="font-size: 0.8rem; color: var(--text-color);">成功完成的验证</p>
                                    </div>
                                </div>
                                <div style="font-size: 2rem; font-weight: 700; color: var(--success-color);">8</div>
                            </div>
                        </div>
                    </div>

                    <!-- 学历证书卡片 -->
                    <div class="col col-8">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">我的学历证书</h3>
                                <div class="card-tools">
                                    <button style="background: none; border: none; cursor: pointer; color: var(--primary-color);">查看全部</button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div style="display: flex; gap: 20px; overflow-x: auto; padding-bottom: 10px;">
                                    <!-- 本科学历证书 -->
                                    <div class="certificate-card" style="min-width: 300px; background: linear-gradient(135deg, #f5f7fa 0%, #e4e9f2 100%); border-radius: 10px; padding: 20px; position: relative; border: 1px solid var(--border-color); box-shadow: var(--shadow-sm); transition: var(--transition);">
                                        <div style="position: absolute; top: 15px; right: 15px;">
                                            <svg viewBox="0 0 24 24" width="24" height="24" fill="var(--success-color)">
                                                <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z" />
                                            </svg>
                                        </div>
                                        <div style="text-align: center; margin-bottom: 15px;">
                                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTIgMTlMMTkgMTIuNTM0NVY1TDEyIDExLjVMNSA1VjEyLjUzNDVMMTIgMTlaIiBzdHJva2U9IiMxQTI5ODAiIHN0cm9rZS13aWR0aD0iMiIgLz48L3N2Zz4=" alt="学链通大学校徽" style="width: 80px; height: 80px;">
                                        </div>
                                        <div style="text-align: center; margin-bottom: 15px;">
                                            <h4 style="font-size: 1.1rem; font-weight: 600; color: var(--dark-color); margin-bottom: 5px;">本科学历证书</h4>
                                            <p style="font-size: 0.9rem; color: var(--text-color);">学链通大学</p>
                                        </div>
                                        <div style="background-color: rgba(255, 255, 255, 0.7); border-radius: 5px; padding: 10px; margin-bottom: 15px;">
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                                <span style="font-size: 0.8rem; color: var(--text-color);">学生姓名</span>
                                                <span style="font-size: 0.8rem; font-weight: 500; color: var(--dark-color);">张力</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                                <span style="font-size: 0.8rem; color: var(--text-color);">专业</span>
                                                <span style="font-size: 0.8rem; font-weight: 500; color: var(--dark-color);">计算机科学与技术</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                                <span style="font-size: 0.8rem; color: var(--text-color);">学位</span>
                                                <span style="font-size: 0.8rem; font-weight: 500; color: var(--dark-color);">工学学士</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between;">
                                                <span style="font-size: 0.8rem; color: var(--text-color);">毕业时间</span>
                                                <span style="font-size: 0.8rem; font-weight: 500; color: var(--dark-color);">2022-06-30</span>
                                            </div>
                                        </div>
                                        <div style="display: flex; gap: 10px;">
                                            <button style="flex: 1; background-color: var(--primary-color); color: white; border: none; padding: 8px 0; border-radius: 5px; font-size: 0.8rem; cursor: pointer;">查看详情</button>
                                            <button style="flex: 1; background-color: white; color: var(--primary-color); border: 1px solid var(--primary-color); padding: 8px 0; border-radius: 5px; font-size: 0.8rem; cursor: pointer;">下载证书</button>
                                        </div>
                                    </div>

                                    <!-- 硕士学历证书 -->
                                    <div class="certificate-card" style="min-width: 300px; background: linear-gradient(135deg, #f5f7fa 0%, #e4e9f2 100%); border-radius: 10px; padding: 20px; position: relative; border: 1px solid var(--border-color); box-shadow: var(--shadow-sm); transition: var(--transition);">
                                        <div style="position: absolute; top: 15px; right: 15px;">
                                            <svg viewBox="0 0 24 24" width="24" height="24" fill="var(--success-color)">
                                                <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z" />
                                            </svg>
                                        </div>
                                        <div style="text-align: center; margin-bottom: 15px;">
                                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTIgMTlMMTkgMTIuNTM0NVY1TDEyIDExLjVMNSA1VjEyLjUzNDVMMTIgMTlaIiBzdHJva2U9IiMxQTI5ODAiIHN0cm9rZS13aWR0aD0iMiIgLz48L3N2Zz4=" alt="学链通大学校徽" style="width: 80px; height: 80px;">
                                        </div>
                                        <div style="text-align: center; margin-bottom: 15px;">
                                            <h4 style="font-size: 1.1rem; font-weight: 600; color: var(--dark-color); margin-bottom: 5px;">硕士学历证书</h4>
                                            <p style="font-size: 0.9rem; color: var(--text-color);">学链通大学</p>
                                        </div>
                                        <div style="background-color: rgba(255, 255, 255, 0.7); border-radius: 5px; padding: 10px; margin-bottom: 15px;">
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                                <span style="font-size: 0.8rem; color: var(--text-color);">学生姓名</span>
                                                <span style="font-size: 0.8rem; font-weight: 500; color: var(--dark-color);">张力</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                                <span style="font-size: 0.8rem; color: var(--text-color);">专业</span>
                                                <span style="font-size: 0.8rem; font-weight: 500; color: var(--dark-color);">计算机科学与技术</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                                <span style="font-size: 0.8rem; color: var(--text-color);">学位</span>
                                                <span style="font-size: 0.8rem; font-weight: 500; color: var(--dark-color);">工学硕士</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between;">
                                                <span style="font-size: 0.8rem; color: var(--text-color);">毕业时间</span>
                                                <span style="font-size: 0.8rem; font-weight: 500; color: var(--dark-color);">在读</span>
                                            </div>
                                        </div>
                                        <div style="display: flex; gap: 10px;">
                                            <button style="flex: 1; background-color: var(--primary-color); color: white; border: none; padding: 8px 0; border-radius: 5px; font-size: 0.8rem; cursor: pointer;">查看详情</button>
                                            <button style="flex: 1; background-color: white; color: var(--primary-color); border: 1px solid var(--primary-color); padding: 8px 0; border-radius: 5px; font-size: 0.8rem; cursor: pointer;">下载证书</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 授权管理 -->
                    <div class="col col-4">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">授权管理</h3>
                                <div class="card-tools">
                                    <button style="background: none; border: none; cursor: pointer; color: var(--primary-color);">创建授权</button>
                                </div>
                            </div>
                            <div class="card-body" style="padding-top: 10px;">
                                <div style="border-left: 2px solid var(--warning-color); padding-left: 15px; margin-bottom: 15px;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span style="font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">腾讯科技</span>
                                        <span class="badge badge-warning">已使用</span>
                                    </div>
                                    <p style="font-size: 0.8rem; color: var(--text-color); margin-bottom: 10px;">本科学历证书核验授权</p>
                                    <div style="margin-bottom: 10px;">
                                        <div style="height: 6px; background-color: var(--light-color); border-radius: 3px; overflow: hidden;">
                                            <div style="height: 100%; width: 100%; background-color: var(--warning-color);"></div>
                                        </div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--text-color);">
                                        <span>创建时间: 2024-09-15</span>
                                        <span>有效期: 已过期</span>
                                    </div>
                                </div>

                                <div style="border-left: 2px solid var(--success-color); padding-left: 15px; margin-bottom: 15px;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span style="font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">阿里巴巴集团</span>
                                        <span class="badge badge-success">有效</span>
                                    </div>
                                    <p style="font-size: 0.8rem; color: var(--text-color); margin-bottom: 10px;">本科学历证书核验授权</p>
                                    <div style="margin-bottom: 10px;">
                                        <div style="height: 6px; background-color: var(--light-color); border-radius: 3px; overflow: hidden;">
                                            <div style="height: 100%; width: 60%; background-color: var(--success-color);"></div>
                                        </div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--text-color);">
                                        <span>创建时间: 2024-09-20</span>
                                        <span>有效期: 剩余3天</span>
                                    </div>
                                </div>

                                <div style="border-left: 2px solid var(--primary-color); padding-left: 15px;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span style="font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">百度在线</span>
                                        <span class="badge badge-primary">未使用</span>
                                    </div>
                                    <p style="font-size: 0.8rem; color: var(--text-color); margin-bottom: 10px;">硕士学历证书核验授权</p>
                                    <div style="margin-bottom: 10px;">
                                        <div style="height: 6px; background-color: var(--light-color); border-radius: 3px; overflow: hidden;">
                                            <div style="height: 100%; width: 0%; background-color: var(--primary-color);"></div>
                                        </div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--text-color);">
                                        <span>创建时间: 2024-09-25</span>
                                        <span>有效期: 剩余7天</span>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer" style="text-align: center;">
                                <a href="#authorization" style="color: var(--primary-color); text-decoration: none; font-size: 0.9rem;">查看全部授权记录</a>
                            </div>
                        </div>
                    </div>

                    <!-- 系统消息 -->
                    <div class="col col-12">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">系统消息</h3>
                                <div class="card-tools">
                                    <button style="background: none; border: none; cursor: pointer; color: var(--primary-color);">标记全部已读</button>
                                </div>
                            </div>
                            <div class="card-body" style="padding: 0;">
                                <div style="border-bottom: 1px solid var(--border-color); padding: 15px 20px; display: flex; align-items: flex-start; background-color: rgba(26, 41, 128, 0.05);">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background-color: var(--primary-color); color: white; display: flex; align-items: center; justify-content: center; margin-right: 15px; flex-shrink: 0;">
                                        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                            <path d="M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z" />
                                        </svg>
                                    </div>
                                    <div style="flex: 1;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                            <h4 style="font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">授权核验通知</h4>
                                            <span style="font-size: 0.8rem; color: var(--text-color);">今天 10:25</span>
                                        </div>
                                        <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 10px;">腾讯科技已使用您的学历证书核验授权完成验证，验证时间：2024-09-18 14:30</p>
                                        <div style="display: flex; gap: 10px;">
                                            <span class="badge badge-success">核验完成</span>
                                            <a href="#" style="font-size: 0.8rem; color: var(--primary-color); text-decoration: none;">查看详情</a>
                                        </div>
                                    </div>
                                </div>

                                <div style="border-bottom: 1px solid var(--border-color); padding: 15px 20px; display: flex; align-items: flex-start;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background-color: var(--success-color); color: white; display: flex; align-items: center; justify-content: center; margin-right: 15px; flex-shrink: 0;">
                                        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                            <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" />
                                        </svg>
                                    </div>
                                    <div style="flex: 1;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                            <h4 style="font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">授权核验通知</h4>
                                            <span style="font-size: 0.8rem; color: var(--text-color);">昨天 16:42</span>
                                        </div>
                                        <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 10px;">阿里巴巴集团已使用您的学历证书核验授权完成验证，验证时间：2024-09-20 09:15</p>
                                        <div style="display: flex; gap: 10px;">
                                            <span class="badge badge-success">核验完成</span>
                                            <a href="#" style="font-size: 0.8rem; color: var(--primary-color); text-decoration: none;">查看详情</a>
                                        </div>
                                    </div>
                                </div>

                                <div style="padding: 15px 20px; display: flex; align-items: flex-start;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background-color: var(--primary-light); color: white; display: flex; align-items: center; justify-content: center; margin-right: 15px; flex-shrink: 0;">
                                        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                            <path d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
                                        </svg>
                                    </div>
                                    <div style="flex: 1;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                            <h4 style="font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">系统公告</h4>
                                            <span style="font-size: 0.8rem; color: var(--text-color);">3天前</span>
                                        </div>
                                        <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 10px;">学链通平台已升级至v2.1版本，新增授权管理功能，支持企业核验通知。您现在可以主动为企业创建核验授权，并实时接收核验状态通知。</p>
                                        <div style="display: flex; gap: 10px;">
                                            <span class="badge badge-primary">系统</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer" style="text-align: center;">
                                <a href="#messages" style="color: var(--primary-color); text-decoration: none; font-size: 0.9rem;">查看全部消息</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 学历信息页面 -->
            <div id="education-content" class="page-content" style="display: none;">
                <div class="row">
                    <div class="col col-12">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">我的学历信息</h3>
                            </div>
                            <div class="card-body">
                                <div style="display: flex; gap: 20px; overflow-x: auto; padding-bottom: 10px;">
                                    <!-- 本科学历证书 -->
                                    <div class="certificate-card" style="min-width: 300px; background: linear-gradient(135deg, #f5f7fa 0%, #e4e9f2 100%); border-radius: 10px; padding: 20px; position: relative; border: 1px solid var(--border-color); box-shadow: var(--shadow-sm); transition: var(--transition);">
                                        <div style="position: absolute; top: 15px; right: 15px;">
                                            <svg viewBox="0 0 24 24" width="24" height="24" fill="var(--success-color)">
                                                <path d="M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z" />
                                            </svg>
                                        </div>
                                        <h4 style="margin: 0 0 10px 0; font-size: 1.1rem; color: var(--dark-color);">本科学历证书</h4>
                                        <p style="margin: 0 0 15px 0; font-size: 0.9rem; color: var(--text-color);">计算机科学与技术</p>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span style="font-size: 0.8rem; color: var(--text-color);">毕业院校</span>
                                            <span style="font-size: 0.8rem; color: var(--dark-color);">学链通大学</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span style="font-size: 0.8rem; color: var(--text-color);">毕业时间</span>
                                            <span style="font-size: 0.8rem; color: var(--dark-color);">2024年6月</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                                            <span style="font-size: 0.8rem; color: var(--text-color);">证书状态</span>
                                            <span style="font-size: 0.8rem; color: var(--success-color); font-weight: 500;">已上链</span>
                                        </div>
                                        <button class="view-certificate-btn" style="width: 100%; padding: 8px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 0.9rem;">查看详情</button>
                                    </div>
                                    
                                    <!-- 硕士学历证书 -->
                                    <div class="certificate-card" style="min-width: 300px; background: linear-gradient(135deg, #f5f7fa 0%, #e4e9f2 100%); border-radius: 10px; padding: 20px; position: relative; border: 1px solid var(--border-color); box-shadow: var(--shadow-sm); transition: var(--transition);">
                                        <div style="position: absolute; top: 15px; right: 15px;">
                                            <svg viewBox="0 0 24 24" width="24" height="24" fill="var(--success-color)">
                                                <path d="M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z" />
                                            </svg>
                                        </div>
                                        <h4 style="margin: 0 0 10px 0; font-size: 1.1rem; color: var(--dark-color);">硕士学历证书</h4>
                                        <p style="margin: 0 0 15px 0; font-size: 0.9rem; color: var(--text-color);">软件工程</p>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span style="font-size: 0.8rem; color: var(--text-color);">毕业院校</span>
                                            <span style="font-size: 0.8rem; color: var(--dark-color);">学链通大学</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span style="font-size: 0.8rem; color: var(--text-color);">毕业时间</span>
                                            <span style="font-size: 0.8rem; color: var(--dark-color);">2024年6月</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                                            <span style="font-size: 0.8rem; color: var(--text-color);">证书状态</span>
                                            <span style="font-size: 0.8rem; color: var(--success-color); font-weight: 500;">已上链</span>
                                        </div>
                                        <button class="view-certificate-btn" style="width: 100%; padding: 8px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 0.9rem;">查看详情</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 证书生成页面 -->
            <div id="certificate-page-content" class="page-content" style="display: none;">
                <div class="row">
                    <div class="col col-12">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">证书生成</h3>
                            </div>
                            <div class="card-body">
                                <div style="text-align: center; padding: 40px;">
                                    <svg viewBox="0 0 24 24" width="80" height="80" fill="var(--primary-color)" style="margin-bottom: 20px;">
                                        <path d="M4,3C2.89,3 2,3.89 2,5V15A2,2 0 0,0 4,17H12V22L15,19L18,22V17H20A2,2 0 0,0 22,15V8L22,6V5A2,2 0 0,0 20,3H16V3H4M12,5L15,7L18,5V8.5L21,10L18,11.5V15L15,13L12,15V11.5L9,10L12,8.5V5M4,5H9V7H4V5M4,9H7V11H4V9M4,13H9V15H4V13Z" />
                                    </svg>
                                    <h3 style="margin-bottom: 15px; color: var(--dark-color);">区块链证书生成</h3>
                                    <p style="margin-bottom: 30px; color: var(--text-color);">您的学历信息已成功上链，可以生成区块链证书用于验证。</p>
                                    <div style="display: flex; gap: 15px; justify-content: center;">
                                        <button style="padding: 12px 24px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 500;">生成本科证书</button>
                                        <button style="padding: 12px 24px; background-color: var(--success-color); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 500;">生成硕士证书</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 账号设置页面 -->
            <div id="settings-content" class="page-content" style="display: none;">
                <div class="row">
                    <div class="col col-8">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">账号设置</h3>
                            </div>
                            <div class="card-body">
                                <form style="max-width: 500px;">
                                    <div style="margin-bottom: 20px;">
                                        <label style="display: block; margin-bottom: 5px; font-weight: 500; color: var(--dark-color);">用户名</label>
                                        <input type="text" value="张力" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                                    </div>
                                    <div style="margin-bottom: 20px;">
                                        <label style="display: block; margin-bottom: 5px; font-weight: 500; color: var(--dark-color);">邮箱</label>
                                        <input type="email" value="zhangli@example.com" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                                    </div>
                                    <div style="margin-bottom: 20px;">
                                        <label style="display: block; margin-bottom: 5px; font-weight: 500; color: var(--dark-color);">手机号</label>
                                        <input type="tel" value="138****5678" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                                    </div>
                                    <div style="margin-bottom: 30px;">
                                        <label style="display: block; margin-bottom: 5px; font-weight: 500; color: var(--dark-color);">修改密码</label>
                                        <input type="password" placeholder="输入新密码" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem; margin-bottom: 10px;">
                                        <input type="password" placeholder="确认新密码" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                                    </div>
                                    <button type="submit" style="padding: 12px 24px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 500;">保存设置</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col col-4">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">安全设置</h3>
                            </div>
                            <div class="card-body">
                                <div style="margin-bottom: 15px;">
                                    <label style="display: flex; align-items: center; font-size: 0.9rem; color: var(--dark-color);">
                                        <input type="checkbox" checked style="margin-right: 10px;">
                                        启用二次验证
                                    </label>
                                </div>
                                <div style="margin-bottom: 15px;">
                                    <label style="display: flex; align-items: center; font-size: 0.9rem; color: var(--dark-color);">
                                        <input type="checkbox" checked style="margin-right: 10px;">
                                        登录通知
                                    </label>
                                </div>
                                <div style="margin-bottom: 15px;">
                                    <label style="display: flex; align-items: center; font-size: 0.9rem; color: var(--dark-color);">
                                        <input type="checkbox" style="margin-right: 10px;">
                                        异地登录保护
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>


    
    <!-- 证书详情模态框 -->
    <div id="certificate-modal" class="modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 10px; width: 90%; max-width: 800px; z-index: 1000; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); overflow: hidden;">
        <div style="padding: 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
            <h3 style="margin: 0; font-size: 1.2rem; color: var(--dark-color);">证书详情</h3>
            <button class="modal-close-btn" style="background: none; border: none; cursor: pointer; color: var(--text-color); font-size: 1.5rem;">&times;</button>
        </div>
        <div id="certificate-content" style="padding: 20px; max-height: 70vh; overflow-y: auto;">
            <!-- 证书内容将通过JavaScript动态填充 -->
        </div>
    </div>
    
    <!-- 创建核验授权模态框 -->
    <div id="new-authorization-modal" class="modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 10px; width: 90%; max-width: 600px; z-index: 101; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); overflow: hidden;">
        <div style="padding: 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
            <h3 style="margin: 0; font-size: 1.2rem; color: var(--dark-color);">创建核验授权</h3>
            <button class="modal-close-btn" style="background: none; border: none; cursor: pointer; color: var(--text-color); font-size: 1.5rem;">&times;</button>
        </div>
        <div style="padding: 20px;">
            <form id="authorization-form">
                <div style="margin-bottom: 15px;">
                    <label for="authorization-company" style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--dark-color);">授权对象</label>
                    <input type="text" id="authorization-company" placeholder="请输入企业或机构名称，例如：腾讯科技、阿里巴巴、百度等" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label for="authorization-certificate" style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--dark-color);">授权证书</label>
                    <select id="authorization-certificate" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                        <option value="">请选择要授权的证书</option>
                        <option value="bachelor">本科学历证书</option>
                        <option value="master">硕士学历证书</option>
                    </select>
                </div>
                <div style="margin-bottom: 15px;">
                    <label for="authorization-duration" style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--dark-color);">授权有效期</label>
                    <select id="authorization-duration" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                        <option value="7">7天</option>
                        <option value="15">15天</option>
                        <option value="30" selected>30天</option>
                        <option value="60">60天</option>
                        <option value="90">90天</option>
                    </select>
                </div>
                <div style="margin-bottom: 15px;">
                    <label for="authorization-purpose" style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--dark-color);">授权用途</label>
                    <input type="text" id="authorization-purpose" placeholder="例如：求职背景调查、面试资格确认、入职资格验证等" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                </div>
                <div style="margin-bottom: 10px;">
                    <label style="display: flex; align-items: center; font-size: 0.9rem; color: var(--dark-color);">
                        <input type="checkbox" id="authorization-terms" style="margin-right: 10px;">
                        我同意向指定对象授权查看指定的学历信息
                    </label>
                </div>
                <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;">
                    <button type="button" class="modal-close-btn" style="padding: 8px 15px; background-color: var(--light-color); border: none; border-radius: 5px; color: var(--text-color); cursor: pointer;">取消</button>
                    <button type="button" id="submit-authorization" style="padding: 8px 15px; background-color: var(--primary-color); border: none; border-radius: 5px; color: white; cursor: pointer;">创建授权</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 查看所有授权记录模态框 -->
    <div id="all-authorizations-modal" class="modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 10px; width: 90%; max-width: 800px; z-index: 101; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); overflow: hidden;">
        <div style="padding: 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
            <h3 style="margin: 0; font-size: 1.2rem; color: var(--dark-color);">授权记录管理</h3>
            <button class="modal-close-btn" style="background: none; border: none; cursor: pointer; color: var(--text-color); font-size: 1.5rem;">&times;</button>
        </div>
        <div id="all-authorizations-content" style="padding: 0; max-height: 70vh; overflow-y: auto;">
            <!-- 授权记录将通过JavaScript动态填充 -->
        </div>
        <div style="padding: 15px 20px; border-top: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
            <button id="create-new-authorization" style="padding: 8px 15px; background-color: var(--primary-color); border: none; border-radius: 5px; color: white; cursor: pointer;">创建授权</button>
            <button class="modal-close-btn" style="padding: 8px 15px; background-color: var(--light-color); border: none; border-radius: 5px; color: var(--text-color); cursor: pointer;">关闭</button>
        </div>
    </div>
    
    <!-- 消息详情模态框 -->
    <div id="message-detail-modal" class="modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 10px; width: 90%; max-width: 600px; z-index: 101; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); overflow: hidden;">
        <div style="padding: 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
            <h3 id="message-detail-title" style="margin: 0; font-size: 1.2rem; color: var(--dark-color);">消息详情</h3>
            <button class="modal-close-btn" style="background: none; border: none; cursor: pointer; color: var(--text-color); font-size: 1.5rem;">&times;</button>
        </div>
        <div id="message-detail-content" style="padding: 20px; max-height: 70vh; overflow-y: auto;">
            <!-- 消息详情将通过JavaScript动态填充 -->
        </div>
    </div>
    
    <!-- 查看所有消息模态框 -->
    <div id="all-messages-modal" class="modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 10px; width: 90%; max-width: 800px; z-index: 101; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); overflow: hidden;">
        <div style="padding: 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
            <h3 style="margin: 0; font-size: 1.2rem; color: var(--dark-color);">消息中心</h3>
            <button class="modal-close-btn" style="background: none; border: none; cursor: pointer; color: var(--text-color); font-size: 1.5rem;">&times;</button>
        </div>
        <div style="padding: 15px 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
            <select id="message-filter" style="padding: 8px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                <option value="all">全部消息</option>
                <option value="unread">未读消息</option>
                <option value="system">系统公告</option>
                <option value="verification">核验通知</option>
            </select>
            <button id="mark-all-read" style="padding: 8px 15px; background-color: var(--light-color); border: none; border-radius: 5px; color: var(--text-color); cursor: pointer;">标记全部已读</button>
        </div>
        <div id="all-messages-content" style="padding: 0; max-height: 60vh; overflow-y: auto;">
            <!-- 消息列表将通过JavaScript动态填充 -->
        </div>
    </div>
    
    <!-- 隐私设置模态框 -->
    <div id="privacy-modal" class="modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 10px; width: 90%; max-width: 700px; z-index: 101; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); overflow: hidden;">
        <div style="padding: 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
            <h3 style="margin: 0; font-size: 1.2rem; color: var(--dark-color);">隐私设置</h3>
            <button class="modal-close-btn" style="background: none; border: none; cursor: pointer; color: var(--text-color); font-size: 1.5rem;">&times;</button>
        </div>
        <div style="padding: 20px; max-height: 70vh; overflow-y: auto;">
            <div style="margin-bottom: 25px;">
                <h4 style="font-size: 1.1rem; color: var(--dark-color); margin-bottom: 15px;">证书可见性</h4>
                <div style="padding: 15px; background-color: rgba(0, 0, 0, 0.02); border-radius: 8px; margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <div>
                            <h5 style="margin: 0 0 5px 0; font-size: 1rem; color: var(--dark-color);">本科学历证书</h5>
                            <p style="margin: 0; font-size: 0.85rem; color: var(--text-color);">学链通大学 · 计算机科学与技术</p>
                        </div>
                        <select class="privacy-setting" data-certificate="bachelor" style="padding: 8px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                            <option value="public">公开</option>
                            <option value="contacts">仅认证企业可见</option>
                            <option value="private">私密</option>
                        </select>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h5 style="margin: 0 0 5px 0; font-size: 1rem; color: var(--dark-color);">硕士学历证书</h5>
                            <p style="margin: 0; font-size: 0.85rem; color: var(--text-color);">学链通大学 · 计算机科学与技术</p>
                        </div>
                        <select class="privacy-setting" data-certificate="master" style="padding: 8px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                            <option value="public">公开</option>
                            <option value="contacts">仅认证企业可见</option>
                            <option value="private">私密</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div style="margin-bottom: 25px;">
                <h4 style="font-size: 1.1rem; color: var(--dark-color); margin-bottom: 15px;">验证授权设置</h4>
                <div style="padding: 15px; background-color: rgba(0, 0, 0, 0.02); border-radius: 8px;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: flex; align-items: center; font-size: 0.9rem; color: var(--dark-color); margin-bottom: 10px;">
                            <input type="checkbox" id="auto-approve" style="margin-right: 10px;">
                            自动批准来自已认证企业的新验证请求
                        </label>
                        <p style="margin: 0; font-size: 0.85rem; color: var(--text-color); margin-left: 25px;">启用后，已通过一次验证的企业将自动获得后续的验证批准</p>
                    </div>
                    <div>
                        <label style="display: flex; align-items: center; font-size: 0.9rem; color: var(--dark-color); margin-bottom: 10px;">
                            <input type="checkbox" id="notify-new-verification" style="margin-right: 10px;" checked>
                            当收到新的验证请求时通知我
                        </label>
                        <p style="margin: 0; font-size: 0.85rem; color: var(--text-color); margin-left: 25px;">通过系统消息提醒您有新的验证请求需要处理</p>
                    </div>
                </div>
            </div>
            
            <div>
                <h4 style="font-size: 1.1rem; color: var(--dark-color); margin-bottom: 15px;">数据分享设置</h4>
                <div style="padding: 15px; background-color: rgba(0, 0, 0, 0.02); border-radius: 8px;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: flex; align-items: center; font-size: 0.9rem; color: var(--dark-color); margin-bottom: 10px;">
                            <input type="checkbox" id="share-education" style="margin-right: 10px;" checked>
                            分享学历信息
                        </label>
                        <p style="margin: 0; font-size: 0.85rem; color: var(--text-color); margin-left: 25px;">包括学校、专业、学位、入学和毕业时间</p>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: flex; align-items: center; font-size: 0.9rem; color: var(--dark-color); margin-bottom: 10px;">
                            <input type="checkbox" id="share-grades" style="margin-right: 10px;">
                            分享成绩信息
                        </label>
                        <p style="margin: 0; font-size: 0.85rem; color: var(--text-color); margin-left: 25px;">包括GPA、专业课程成绩和综合评价</p>
                    </div>
                    <div>
                        <label style="display: flex; align-items: center; font-size: 0.9rem; color: var(--dark-color); margin-bottom: 10px;">
                            <input type="checkbox" id="share-awards" style="margin-right: 10px;" checked>
                            分享荣誉和奖项信息
                        </label>
                        <p style="margin: 0; font-size: 0.85rem; color: var(--text-color); margin-left: 25px;">包括获得的奖学金、荣誉称号和比赛获奖记录</p>
                    </div>
                </div>
            </div>
        </div>
        <div style="padding: 15px 20px; border-top: 1px solid var(--border-color); display: flex; justify-content: flex-end; gap: 10px;">
            <button class="modal-close-btn" style="padding: 8px 15px; background-color: var(--light-color); border: none; border-radius: 5px; color: var(--text-color); cursor: pointer;">取消</button>
            <button id="save-privacy" style="padding: 8px 15px; background-color: var(--primary-color); border: none; border-radius: 5px; color: white; cursor: pointer;">保存设置</button>
        </div>
    </div>
    
    <!-- 通知提示 -->
    <div id="notification-toast" style="display: none; position: fixed; bottom: 20px; right: 20px; background-color: white; border-radius: 8px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); width: 300px; padding: 15px; border-left: 4px solid var(--primary-color); z-index: 200;">
        <div style="display: flex; align-items: flex-start;">
            <div id="notification-icon" style="margin-right: 10px; color: var(--primary-color);">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                    <path d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
                </svg>
            </div>
            <div style="flex: 1;">
                <h4 id="notification-title" style="margin: 0 0 5px 0; font-size: 1rem; color: var(--dark-color);"></h4>
                <p id="notification-message" style="margin: 0; font-size: 0.85rem; color: var(--text-color);"></p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 导航菜单交互
            const navLinks = document.querySelectorAll('.nav-link');
            
            // 初始化显示当前活动页面
            showActivePage();
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    // 如果是退出登录链接，不阻止默认行为，让它直接跳转
                    if (this.getAttribute('href') === '../login.html') {
                        return; // 直接返回，让浏览器处理页面跳转
                    }
                    
                    e.preventDefault();
                    
                    // 移除所有active类
                    navLinks.forEach(l => l.classList.remove('active'));
                    // 添加active类到当前点击的链接
                    this.classList.add('active');
                    
                    // 更新页面标题
                    const pageTitle = document.querySelector('.page-title');
                    if (pageTitle) {
                        pageTitle.textContent = this.querySelector('span').textContent;
                    }
                    
                    // 获取目标页面ID
                    const targetHash = this.getAttribute('href').substring(1);
                    
                    // 显示对应页面内容
                    showActivePage(targetHash);
                });
            });
            
            // 显示当前活动页面内容
            function showActivePage(pageId = 'dashboard') {
                // 隐藏所有页面内容
                document.querySelectorAll('.page-content').forEach(content => {
                    content.style.display = 'none';
                });
                
                // 显示当前页面内容
                const currentPage = document.getElementById(`${pageId}-content`);
                if (currentPage) {
                    currentPage.style.display = 'block';
                } else if (pageId === 'privacy') {
                    // 显示隐私设置模态框
                    showModal('privacy-modal');
                } else if (pageId === 'messages') {
                    // 显示消息中心
                    showModal('all-messages-modal');
                    
                    // 渲染消息
                    if (typeof renderAllMessages === 'function') {
                        renderAllMessages('all');
                    }
                } else if (pageId === 'verification') {
                    // 显示授权管理页面
                    showModal('all-authorizations-modal');
                    
                    // 渲染授权记录
                    if (typeof renderAllAuthorizations === 'function') {
                        renderAllAuthorizations();
                    }
                }
            }
            
            // 欢迎卡片按钮点击事件
            const viewCertificateBtn = document.querySelector('.card[style*="linear-gradient"] button:first-child');
            if (viewCertificateBtn) {
                viewCertificateBtn.addEventListener('click', function() {
                    // 切换到学历证书页面
                    document.querySelector('.nav-link[href="#education"]').click();
                });
            }
            
            const privacySettingBtn = document.querySelector('.card[style*="linear-gradient"] button:nth-child(2)');
            if (privacySettingBtn) {
                privacySettingBtn.addEventListener('click', function() {
                    // 显示隐私设置模态框
                    showModal('privacy-modal');
                });
            }
            
            // 用户菜单交互
            const userProfile = document.querySelector('.user-profile');
            if (userProfile) {
                userProfile.addEventListener('click', function() {
                    document.querySelector('.nav-link[href="#settings"]').click();
                });
            }
            
            // 通知图标交互
            const notificationIcon = document.querySelector('.notification-icon');
            if (notificationIcon) {
                notificationIcon.addEventListener('click', function() {
                    showModal('all-messages-modal');
                    
                    // 渲染所有消息 (这个函数会在后面定义)
                    if (typeof renderAllMessages === 'function') {
                        renderAllMessages('all');
                    }
                });
            }
            
            // 证书查看按钮事件
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('view-certificate-btn')) {
                    // 显示证书详情模态框
                    showModal('certificate-modal');
                    
                    // 填充证书详情内容
                    const certificateContent = document.getElementById('certificate-page-content');
                    certificateContent.innerHTML = `
                        <div style="text-align: center; padding: 20px;">
                            <h3 style="margin-bottom: 20px; color: var(--dark-color);">学历证书详情</h3>
                            <div style="background: linear-gradient(135deg, #f5f7fa 0%, #e4e9f2 100%); border-radius: 10px; padding: 30px; margin-bottom: 20px;">
                                <h4 style="margin: 0 0 15px 0; color: var(--dark-color);">本科学历证书</h4>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; text-align: left;">
                                    <div>
                                        <p style="margin: 0 0 5px 0; font-size: 0.9rem; color: var(--text-color);">专业</p>
                                        <p style="margin: 0; font-weight: 500; color: var(--dark-color);">计算机科学与技术</p>
                                    </div>
                                    <div>
                                        <p style="margin: 0 0 5px 0; font-size: 0.9rem; color: var(--text-color);">毕业院校</p>
                                        <p style="margin: 0; font-weight: 500; color: var(--dark-color);">学链通大学</p>
                                    </div>
                                    <div>
                                        <p style="margin: 0 0 5px 0; font-size: 0.9rem; color: var(--text-color);">毕业时间</p>
                                        <p style="margin: 0; font-weight: 500; color: var(--dark-color);">2024年6月</p>
                                    </div>
                                    <div>
                                        <p style="margin: 0 0 5px 0; font-size: 0.9rem; color: var(--text-color);">证书状态</p>
                                        <p style="margin: 0; font-weight: 500; color: var(--success-color);">已上链</p>
                                    </div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 10px; justify-content: center;">
                                <button style="padding: 10px 20px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; cursor: pointer;">下载证书</button>
                                <button style="padding: 10px 20px; background-color: var(--success-color); color: white; border: none; border-radius: 5px; cursor: pointer;">分享证书</button>
                            </div>
                        </div>
                    `;
                }
            });
        });
    </script>

    <script>
    // =============== 简单模态框控制 ===============
    function closeAllModals() {
        console.log('closeAllModals 被调用');
        // 关闭所有模态框
        document.querySelectorAll('.modal').forEach(modal => {
            if (modal.style.display !== 'none') {
                console.log('关闭模态框:', modal.id || '无ID');
                if (modal.parentNode === document.body && 
                    modal.id !== 'certificate-modal' && 
                    modal.id !== 'new-authorization-modal' && 
                    modal.id !== 'edit-authorization-modal' && 
                    modal.id !== 'notification-modal' && 
                    modal.id !== 'add-certificate-modal') {
                    // 动态创建的模态框，移除整个元素
                    try {
                        document.body.removeChild(modal);
                    } catch (e) {
                        console.error('移除模态框失败:', e);
                    }
                } else {
                    // 静态模态框，只隐藏
                    modal.style.display = 'none';
                }
            }
        });
        
        // 恢复页面滚动
        document.body.style.overflow = 'auto';
    }
    
    function showModal(modalId) {
        // 显示模态框
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'block';
        }
        
        // 禁用页面滚动
        document.body.style.overflow = 'hidden';
    }
    
    // 绑定事件
    document.addEventListener('DOMContentLoaded', function() {
        // 只绑定关闭按钮点击事件
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal-close-btn') || e.target.closest('.modal-close-btn')) {
                console.log('关闭按钮被点击');
                e.preventDefault();
                e.stopPropagation();
                closeAllModals();
            }
        });
    });
    
    // 显示通知
    function showNotification(title, message, type = 'success') {
        const toast = document.getElementById('notification-toast');
        const toastTitle = document.getElementById('notification-title');
        const toastMessage = document.getElementById('notification-message');
        const toastIcon = document.getElementById('notification-icon');
        
        // 设置通知内容
        toastTitle.textContent = title;
        toastMessage.textContent = message;
        
        // 设置通知类型样式
        toast.style.borderLeftColor = type === 'success' ? 'var(--success-color)' : 
                                      type === 'warning' ? 'var(--warning-color)' : 
                                      type === 'error' ? 'var(--danger-color)' : 'var(--primary-color)';
        
        // 设置图标
        if (type === 'success') {
            toastIcon.innerHTML = '<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" /></svg>';
            toastIcon.style.color = 'var(--success-color)';
        } else if (type === 'warning') {
            toastIcon.innerHTML = '<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" /></svg>';
            toastIcon.style.color = 'var(--warning-color)';
        } else if (type === 'error') {
            toastIcon.innerHTML = '<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" /></svg>';
            toastIcon.style.color = 'var(--danger-color)';
        } else {
            toastIcon.innerHTML = '<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" /></svg>';
            toastIcon.style.color = 'var(--primary-color)';
        }
        
        // 显示通知
        toast.style.display = 'block';
        
        // 设置自动关闭
        setTimeout(() => {
            toast.style.display = 'none';
        }, 3000);
    }

    // 防止点击模态框内容时关闭模态框（但不阻止关闭按钮）
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                // 如果不是关闭按钮，才阻止冒泡
                if (!e.target.classList.contains('modal-close-btn') && !e.target.closest('.modal-close-btn')) {
                e.stopPropagation();
                }
            });
        });
        

        
        // 初始化消息中心
        initMessageCenter();
        
        // 初始化授权管理功能
        initAuthorizationManagement();
    });
    
    // =============== 授权管理功能 ===============
    // 生成18位证书编号
    function generateCertificateNumber() {
        const timestamp = Date.now().toString();
        const random = Math.floor(Math.random() * 10000).toString().padStart(4, '0');
        const year = new Date().getFullYear().toString();
        const month = (new Date().getMonth() + 1).toString().padStart(2, '0');
        const day = new Date().getDate().toString().padStart(2, '0');
        
        // 格式：年份(4位) + 月日(4位) + 时间戳后4位 + 随机数4位 + 校验位2位
        const base = year + month + day + timestamp.slice(-4) + random;
        const checksum = calculateChecksum(base);
        
        return base + checksum;
    }
    
    // 计算校验位
    function calculateChecksum(str) {
        let sum = 0;
        for (let i = 0; i < str.length; i++) {
            sum += parseInt(str[i]) * (i + 1);
        }
        return (sum % 100).toString().padStart(2, '0');
    }
    
    // 全局授权数据 - 基于真实时间计算
    function initializeAuthorizationData() {
        const now = new Date();
        const currentDate = now.toISOString().split('T')[0];
        
        // 计算不同时间点的日期
        const getDateOffset = (daysOffset) => {
            const date = new Date(now);
            date.setDate(date.getDate() + daysOffset);
            return date.toISOString().split('T')[0];
        };
        
        return [
        {
            id: 1,
            company: '腾讯科技',
            type: '本科学历证书核验授权',
            status: '已使用',
            progress: 100,
                startDate: getDateOffset(-15), // 15天前开始
                endDate: getDateOffset(15), // 15天后到期
            purpose: '求职背景调查',
            duration: 30,
                usedDate: getDateOffset(-12), // 12天前使用
                certificateNumber: generateCertificateNumber(),
            issuingAuthority: '学链通大学'
        },
        {
            id: 2,
            company: '阿里巴巴集团',
            type: '本科学历证书核验授权',
            status: '有效',
            progress: 60,
                startDate: getDateOffset(-10), // 10天前开始
                endDate: getDateOffset(20), // 20天后到期
            purpose: '入职资格确认',
            duration: 30,
            usedDate: null,
                certificateNumber: generateCertificateNumber(),
            issuingAuthority: '学链通大学'
        },
        {
            id: 3,
            company: '百度在线',
            type: '硕士学历证书核验授权',
            status: '未使用',
            progress: 0,
                startDate: getDateOffset(-5), // 5天前开始
                endDate: getDateOffset(25), // 25天后到期
            purpose: '面试资格验证',
            duration: 30,
            usedDate: null,
                certificateNumber: generateCertificateNumber(),
                issuingAuthority: '学链通大学'
            },
            {
                id: 4,
                company: '字节跳动',
                type: '本科学历证书核验授权',
                status: '已过期',
                progress: 0,
                startDate: getDateOffset(-40), // 40天前开始
                endDate: getDateOffset(-10), // 10天前已过期
                purpose: '校招资格审核',
                duration: 30,
                usedDate: null,
                certificateNumber: generateCertificateNumber(),
            issuingAuthority: '学链通大学'
        }
    ];
    }

    // 更新授权状态（基于真实时间）
    function updateAuthorizationStatus(authorization) {
        const now = new Date();
        const endDate = new Date(authorization.endDate);
        const startDate = new Date(authorization.startDate);
        
        // 判断是否过期
        if (now > endDate) {
            authorization.status = '已过期';
            authorization.progress = 0;
        } else if (authorization.usedDate) {
            authorization.status = '已使用';
            authorization.progress = 100;
        } else if (now >= startDate) {
            authorization.status = '有效';
            // 计算进度（基于时间流逝）
            const totalDuration = endDate - startDate;
            const elapsed = now - startDate;
            authorization.progress = Math.min(100, Math.max(0, (elapsed / totalDuration) * 100));
        } else {
            authorization.status = '未开始';
            authorization.progress = 0;
        }
        
        return authorization;
    }

    // 获取格式化的日期文本
    function getFormattedDate(dateString) {
        const date = new Date(dateString);
        const now = new Date();
        
        if (date < now) {
            const daysDiff = Math.floor((now - date) / (1000 * 60 * 60 * 24));
            if (daysDiff === 0) return '今天';
            if (daysDiff === 1) return '昨天';
            if (daysDiff < 7) return `${daysDiff}天前`;
            if (daysDiff < 30) return `${Math.floor(daysDiff / 7)}周前`;
            return dateString;
        } else {
            const daysDiff = Math.floor((date - now) / (1000 * 60 * 60 * 24));
            if (daysDiff === 0) return '今天';
            if (daysDiff === 1) return '明天';
            if (daysDiff < 7) return `${daysDiff}天后`;
            if (daysDiff < 30) return `${Math.floor(daysDiff / 7)}周后`;
            return dateString;
        }
    }

    // 初始化授权数据并更新状态
    let currentAuthorizations = initializeAuthorizationData().map(updateAuthorizationStatus);
    
    // 初始化授权管理功能
    function initAuthorizationManagement() {
        // 设置定时器，每分钟更新一次授权状态
        setInterval(() => {
            currentAuthorizations = currentAuthorizations.map(updateAuthorizationStatus);
            renderAuthorizationsList();
            updateAuthorizationsCount();
        }, 60000); // 每60秒更新一次
        // 绑定"创建授权"按钮事件 - 授权管理卡片中的创建授权按钮
        const cardTitles = document.querySelectorAll('.card-title');
        let newAuthorizationBtn = null;
        
        cardTitles.forEach(title => {
            if (title.textContent.includes('授权管理')) {
                newAuthorizationBtn = title.parentElement.querySelector('button');
            }
        });
        
        if (newAuthorizationBtn) {
            newAuthorizationBtn.addEventListener('click', function() {
                showNewAuthorizationModal();
            });
        }
        
        // 绑定创建授权表单提交事件
        const submitBtn = document.getElementById('submit-authorization');
        if (submitBtn) {
            submitBtn.addEventListener('click', function() {
                submitNewAuthorization();
            });
        }
        
        // 查看全部授权记录
        const viewAllAuthorizationsBtn = document.querySelector('.card-footer a[href="#authorization"]');
        if (viewAllAuthorizationsBtn) {
            viewAllAuthorizationsBtn.addEventListener('click', function(e) {
                e.preventDefault();
                showAllAuthorizationsModal();
            });
        }
        
        // 初始化渲染授权列表
        renderAuthorizationsList();
    }
    
    // 渲染授权列表
    function renderAuthorizationsList() {
        const cardTitles = document.querySelectorAll('.card-title');
        let authorizationsContainer = null;
        
        cardTitles.forEach(title => {
            if (title.textContent.includes('授权管理')) {
                authorizationsContainer = title.parentElement.nextElementSibling;
            }
        });
        
        if (!authorizationsContainer) return;
        
        // 清空容器
        authorizationsContainer.innerHTML = '';
        
        // 更新授权状态（基于当前时间）
        currentAuthorizations = currentAuthorizations.map(updateAuthorizationStatus);
        
        // 渲染最新的3个授权
        const recentAuthorizations = currentAuthorizations.slice(0, 3);
        
        recentAuthorizations.forEach((auth, index) => {
            let borderColor, badgeClass, progressColor;
            
            if (auth.status === '已过期') {
                borderColor = 'var(--danger-color)';
                badgeClass = 'badge-danger';
                progressColor = 'var(--danger-color)';
            } else if (auth.status === '已使用') {
                borderColor = 'var(--warning-color)';
                badgeClass = 'badge-warning';
                progressColor = 'var(--warning-color)';
            } else if (auth.status === '有效') {
                borderColor = 'var(--success-color)';
                badgeClass = 'badge-success';
                progressColor = 'var(--success-color)';
            } else {
                borderColor = 'var(--primary-color)';
                badgeClass = 'badge-primary';
                progressColor = 'var(--primary-color)';
            }
            
            // 使用格式化的日期显示
            const endDateText = auth.status === '已过期' ? 
                `已过期 (${getFormattedDate(auth.endDate)})` : 
                `到期时间: ${getFormattedDate(auth.endDate)}`;
            const startDateText = `创建: ${getFormattedDate(auth.startDate)}`;
            
            const marginBottom = index < recentAuthorizations.length - 1 ? '15px' : '0';
            
            authorizationsContainer.innerHTML += `
                <div style="border-left: 2px solid ${borderColor}; padding-left: 15px; margin-bottom: ${marginBottom};">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span style="font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">${auth.company}</span>
                        <span class="badge ${badgeClass}">${auth.status}</span>
                    </div>
                    <p style="font-size: 0.8rem; color: var(--text-color); margin-bottom: 10px;">${auth.type}</p>
                    <div style="margin-bottom: 10px;">
                        <div style="height: 6px; background-color: var(--light-color); border-radius: 3px; overflow: hidden;">
                            <div style="height: 100%; width: ${auth.progress}%; background-color: ${progressColor};"></div>
                        </div>
                    </div>
                                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--text-color);">
                    <span>${startDateText}</span>
                    <span>${endDateText}</span>
                </div>
                ${auth.certificateNumber ? `
                <div style="margin-top: 8px; padding: 8px; background-color: rgba(0, 0, 0, 0.02); border-radius: 4px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="font-size: 0.8rem; color: var(--text-color);">证书编号:</span>
                        <span style="font-size: 0.8rem; font-family: monospace; color: var(--primary-color); font-weight: 500;">${auth.certificateNumber}</span>
                    </div>
                </div>
                ` : ''}
                </div>
            `;
        });
    }
    
    // 显示创建授权模态框
    function showNewAuthorizationModal() {
        showModal('new-authorization-modal');
            
            // 重置表单
            const form = document.getElementById('authorization-form');
            const terms = document.getElementById('authorization-terms');
            
            if (form) form.reset();
            if (terms) terms.checked = false;
    }
    
    
    // 提交新的授权
    function submitNewAuthorization() {
        const company = document.getElementById('authorization-company').value;
        const certificate = document.getElementById('authorization-certificate').value;
        const duration = document.getElementById('authorization-duration').value;
        const purpose = document.getElementById('authorization-purpose').value;
        const terms = document.getElementById('authorization-terms').checked;
        
        // 表单验证
        if (!company.trim()) {
            showNotification('创建失败', '请输入授权对象名称', 'error');
            return;
        }
        
        if (!certificate) {
            showNotification('创建失败', '请选择要授权的证书', 'error');
            return;
        }
        
        if (!purpose.trim()) {
            showNotification('创建失败', '请填写授权用途', 'error');
            return;
        }
        
        if (!terms) {
            showNotification('创建失败', '请同意授权协议', 'error');
            return;
        }
        
        // 关闭模态框
        closeAllModals();
        
        // 显示创建成功通知
        const companyName = company;
        const certificateName = document.querySelector(`#authorization-certificate option[value="${certificate}"]`).textContent;
        
        showNotification('授权创建成功', `已为${companyName}创建${certificateName}核验授权，有效期${duration}天`, 'success');
        
        // 生成18位证书编号
        const certificateNumber = generateCertificateNumber();
        
        // 添加新授权到列表
        const now = new Date();
        const endDate = new Date();
        endDate.setDate(endDate.getDate() + parseInt(duration));
        
        const newAuthorization = {
            id: Date.now(),
            company: companyName,
            type: certificateName + '核验授权',
            status: '有效',
            progress: 0,
            startDate: now.toISOString().split('T')[0], // 使用ISO格式 YYYY-MM-DD
            endDate: endDate.toISOString().split('T')[0],
            purpose: purpose,
            duration: parseInt(duration),
            usedDate: null,
            certificateNumber: certificateNumber,
            issuingAuthority: '学链通大学'
        };
        
        // 更新新授权的状态
        updateAuthorizationStatus(newAuthorization);
        
        // 将新授权添加到列表开头
        currentAuthorizations.unshift(newAuthorization);
        
        // 更新授权列表显示
        renderAuthorizationsList();
        
        // 更新统计数字
        updateAuthorizationsCount();
        
        // 添加新消息通知
        setTimeout(() => {
            showNotification('授权创建完成', '企业可使用授权码进行学历核验', 'info');
        }, 500);
    }
    
    // 更新授权统计数字
    function updateAuthorizationsCount() {
        // 先更新所有授权的状态
        currentAuthorizations = currentAuthorizations.map(updateAuthorizationStatus);
        
        const statsCard = document.querySelectorAll('.col-4')[1]; // 授权管理统计卡片
        const countElement = statsCard.querySelector('[style*="font-size: 2rem"]');
        
        if (countElement) {
            // 计算有效授权数量（不包括已过期的）
            const validAuthCount = currentAuthorizations.filter(auth => 
                auth.status !== '已过期'
            ).length;
            countElement.textContent = validAuthCount;
        }
        
        // 也可以更新其他统计信息
        const descElement = statsCard.querySelector('p');
        if (descElement) {
            const expiredCount = currentAuthorizations.filter(auth => auth.status === '已过期').length;
            const usedCount = currentAuthorizations.filter(auth => auth.status === '已使用').length;
            const activeCount = currentAuthorizations.filter(auth => auth.status === '有效').length;
            
            descElement.textContent = `有效: ${activeCount} | 已使用: ${usedCount} | 已过期: ${expiredCount}`;
        }
    }
    
    // 显示全部授权记录模态框
    function showAllAuthorizationsModal() {
        // 渲染所有授权记录
        renderAllAuthorizations();
        
        // 显示模态框
        showModal('all-authorizations-modal');
        
        // 绑定模态框内的创建授权按钮
        const createNewBtn = document.getElementById('create-new-authorization');
        if (createNewBtn) {
            createNewBtn.addEventListener('click', function() {
                closeAllModals();
                setTimeout(() => {
                    showNewAuthorizationModal();
                }, 100);
            });
        }
    }
    
    // 渲染所有授权记录
    function renderAllAuthorizations() {
        const allAuthorizationsContent = document.getElementById('all-authorizations-content');
        
        // 使用全局授权数据
        const authorizationsData = currentAuthorizations;
        
        allAuthorizationsContent.innerHTML = authorizationsData.map(auth => `
            <div style="border-bottom: 1px solid var(--border-color); padding: 20px; transition: background-color 0.3s; cursor: pointer;" data-id="${auth.id}">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                    <div>
                        <h4 style="font-size: 1rem; color: var(--dark-color); margin-bottom: 5px;">${auth.company}</h4>
                        <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 10px;">${auth.type}</p>
                        <p style="font-size: 0.8rem; color: var(--text-color);">授权用途: ${auth.purpose}</p>
                    </div>
                    <span class="badge badge-${auth.status === '已使用' ? 'warning' : (auth.status === '有效' ? 'success' : 'primary')}">${auth.status}</span>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span style="font-size: 0.85rem; color: var(--text-color);">有效期进度</span>
                        <span style="font-size: 0.85rem; font-weight: 500; color: var(--dark-color);">${auth.progress}%</span>
                    </div>
                    <div style="height: 6px; background-color: var(--light-color); border-radius: 3px; overflow: hidden;">
                        <div style="height: 100%; width: ${auth.progress}%; background-color: ${auth.status === '已使用' ? 'var(--warning-color)' : (auth.status === '有效' ? 'var(--success-color)' : 'var(--primary-color)')};"></div>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--text-color);">
                    <span>创建时间: ${auth.startDate}</span>
                    <span>有效期: ${auth.endDate}</span>
                </div>
            </div>
        `).join('');
        
        // 绑定授权记录点击事件
        allAuthorizationsContent.querySelectorAll('[data-id]').forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.style.backgroundColor = 'rgba(0, 0, 0, 0.02)';
            });
            
            item.addEventListener('mouseleave', function() {
                this.style.backgroundColor = 'transparent';
            });
            
            item.addEventListener('click', function() {
                const authId = parseInt(this.getAttribute('data-id'));
                const auth = authorizationsData.find(a => a.id === authId);
                if (auth) {
                    showAuthorizationDetails(auth.company, auth.status, auth.type, '创建时间: ' + auth.startDate, '有效期: ' + auth.endDate);
                }
            });
        });
    }
    
    // 显示授权详情
    function showAuthorizationDetails(company, status, type, startDate, endDate) {
        // 查找对应的授权数据
        const auth = currentAuthorizations.find(a => a.company === company);
        if (!auth) return;
        // 创建授权详情模态框
        const detailModal = document.createElement('div');
        detailModal.id = 'authorization-detail-modal';
        detailModal.className = 'modal';
        detailModal.style.cssText = 'display: block; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 10px; width: 90%; max-width: 600px; z-index: 110; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); overflow: hidden;';
        
        detailModal.innerHTML = `
            <div style="padding: 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; font-size: 1.2rem; color: var(--dark-color);">${company}授权详情</h3>
                <button class="modal-close-btn" style="background: none; border: none; cursor: pointer; color: var(--text-color); font-size: 1.5rem;">&times;</button>
            </div>
            <div style="padding: 20px;">
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <span class="badge badge-${status === '已使用' ? 'warning' : (status === '有效' ? 'success' : 'primary')}" style="margin-right: 15px;">${status}</span>
                        <p style="margin: 0; font-size: 0.9rem; color: var(--text-color);">${type}</p>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; background-color: rgba(0, 0, 0, 0.02); padding: 15px; border-radius: 8px;">
                        <div>
                            <p style="margin: 0; font-size: 0.85rem; color: var(--text-color);">${startDate}</p>
                        </div>
                        <div>
                            <p style="margin: 0; font-size: 0.85rem; color: var(--text-color);">${endDate}</p>
                        </div>
                    </div>
                    
                    ${auth.certificateNumber ? `
                    <div style="margin-top: 15px; padding: 15px; background-color: rgba(33, 150, 243, 0.05); border-radius: 8px; border: 1px solid rgba(33, 150, 243, 0.2);">
                        <h4 style="margin: 0 0 10px 0; font-size: 1rem; color: var(--dark-color);">证书编号</h4>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <span style="font-size: 0.9rem; color: var(--text-color);">编号:</span>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 1rem; font-family: monospace; color: var(--primary-color); font-weight: 600; letter-spacing: 1px;">${auth.certificateNumber}</span>
                                <button id="copy-certificate-number" style="background: none; border: none; cursor: pointer; color: var(--primary-color); font-size: 0.8rem; padding: 4px 8px; border-radius: 4px; border: 1px solid var(--primary-color);">复制</button>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-size: 0.9rem; color: var(--text-color);">颁发机构:</span>
                            <span style="font-size: 0.9rem; color: var(--dark-color);">${auth.issuingAuthority}</span>
                        </div>
                        <div style="margin-top: 10px; padding: 8px; background-color: rgba(0, 200, 83, 0.05); border-radius: 4px; border-left: 3px solid var(--success-color);">
                            <p style="margin: 0; font-size: 0.8rem; color: var(--text-color);">
                                💡 企业可使用此证书编号和颁发机构在验证平台进行学历核验
                            </p>
                        </div>
                    </div>
                    ` : ''}
                </div>
                
                ${status === '有效' ? `
                    <div style="margin-bottom: 20px;">
                        <h4 style="font-size: 1rem; color: var(--dark-color); margin-bottom: 10px;">授权状态</h4>
                        <div style="background-color: rgba(0, 200, 83, 0.05); border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <div style="display: flex; align-items: center;">
                                <svg viewBox="0 0 24 24" width="24" height="24" fill="var(--success-color)" style="margin-right: 10px;">
                                    <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" />
                                </svg>
                                <div>
                                    <h4 style="margin: 0 0 5px 0; font-size: 1rem; color: var(--dark-color);">授权有效</h4>
                                    <p style="margin: 0; font-size: 0.85rem; color: var(--text-color);">企业可使用授权码进行学历核验，授权在有效期内。</p>
                                </div>
                            </div>
                        </div>
                    </div>
                ` : status === '已使用' ? `
                    <div style="margin-bottom: 20px;">
                        <h4 style="font-size: 1rem; color: var(--dark-color); margin-bottom: 10px;">使用记录</h4>
                        <div style="background-color: rgba(255, 193, 7, 0.05); border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <div style="display: flex; align-items: center;">
                                <svg viewBox="0 0 24 24" width="24" height="24" fill="var(--warning-color)" style="margin-right: 10px;">
                                    <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z" />
                                </svg>
                                <div>
                                    <h4 style="margin: 0 0 5px 0; font-size: 1rem; color: var(--dark-color);">授权已使用</h4>
                                    <p style="margin: 0; font-size: 0.85rem; color: var(--text-color);">企业已使用此授权完成学历核验，授权已失效。</p>
                                </div>
                            </div>
                        </div>
                    </div>
                ` : `
                    <div style="margin-bottom: 20px;">
                        <h4 style="font-size: 1rem; color: var(--dark-color); margin-bottom: 10px;">授权状态</h4>
                        <div style="background-color: rgba(33, 150, 243, 0.05); border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <div style="display: flex; align-items: center;">
                                <svg viewBox="0 0 24 24" width="24" height="24" fill="var(--primary-color)" style="margin-right: 10px;">
                                    <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z" />
                                </svg>
                                <div>
                                    <h4 style="margin: 0 0 5px 0; font-size: 1rem; color: var(--dark-color);">授权未使用</h4>
                                    <p style="margin: 0; font-size: 0.85rem; color: var(--text-color);">企业尚未使用此授权，授权在有效期内。</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `}
                
                <div style="text-align: center; margin-top: 20px;">
                    ${auth.status === '未使用' || auth.status === '有效' ? `
                    <button id="extend-authorization" style="padding: 10px 20px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px;">延长有效期</button>
                    ` : ''}
                    <button class="modal-close-btn" style="padding: 10px 20px; background-color: var(--light-color); color: var(--text-color); border: none; border-radius: 5px; cursor: pointer;">关闭</button>
                </div>
            </div>
        `;
        
        // 添加到文档
        document.body.appendChild(detailModal);
        
        // 关闭按钮事件由全局事件委托处理
        
        // 绑定延长有效期按钮事件
        const extendBtn = detailModal.querySelector('#extend-authorization');
        if (extendBtn) {
            extendBtn.addEventListener('click', function() {
                extendAuthorizationValidity(auth.id);
                document.body.removeChild(detailModal);
            });
        }
        
        // 绑定复制证书编号按钮事件
        const copyBtn = detailModal.querySelector('#copy-certificate-number');
        if (copyBtn) {
            copyBtn.addEventListener('click', function() {
                CertificateManager.copyToClipboard(auth.certificateNumber);
                this.textContent = '已复制';
                this.style.backgroundColor = 'var(--success-color)';
                this.style.color = 'white';
                this.style.borderColor = 'var(--success-color)';
                
                setTimeout(() => {
                    this.textContent = '复制';
                    this.style.backgroundColor = 'transparent';
                    this.style.color = 'var(--primary-color)';
                    this.style.borderColor = 'var(--primary-color)';
                }, 2000);
            });
        }
    }
    

    
    // 延长授权有效期
    function extendAuthorizationValidity(authId) {
        const auth = currentAuthorizations.find(a => a.id === authId);
        if (!auth) return;
        
        // 延长30天
        const newEndDate = new Date(auth.endDate);
        newEndDate.setDate(newEndDate.getDate() + 30);
        
        auth.endDate = newEndDate.toISOString().split('T')[0]; // 使用ISO格式
        auth.duration += 30;
        
        // 更新授权状态
        updateAuthorizationStatus(auth);
        
        // 更新显示
        renderAuthorizationsList();
        
        showNotification('延长成功', `授权有效期已延长30天，新到期时间: ${getFormattedDate(auth.endDate)}`, 'success');
    }
    
    // =============== 消息中心 ===============
    // 模拟消息数据 (实际应用中应该从API获取)
    window.messages = [
        {
            id: 1,
            type: 'verification',
            title: '授权核验通知',
            content: '腾讯科技已使用您的学历证书核验授权完成验证，验证时间：2024-09-18 14:30',
            date: '今天 10:25',
            status: 'unread',
            badge: '核验完成',
            badgeType: 'success',
            link: true
        },
        {
            id: 2,
            type: 'verification',
            title: '授权核验通知',
            content: '阿里巴巴集团已使用您的学历证书核验授权完成验证，验证时间：2024-09-20 09:15',
            date: '昨天 16:42',
            status: 'read',
            badge: '核验完成',
            badgeType: 'success',
            link: true
        },
        {
            id: 3,
            type: 'system',
            title: '系统公告',
            content: '学链通平台已升级至v2.1版本，新增授权管理功能，支持企业核验通知。您现在可以主动为企业创建核验授权，并实时接收核验状态通知。',
            date: '3天前',
            status: 'read',
            badge: '系统',
            badgeType: 'primary'
        }
    ];
    
    // 初始化消息中心功能
    function initMessageCenter() {
        
        // 渲染消息到首页
        renderDashboardMessages(window.messages.slice(0, 3));
        
        // 更新未读消息数量
        updateUnreadCount(window.messages);
        
        // 标记全部已读按钮
        const cardTitles = document.querySelectorAll('.card-title');
        let markAllReadBtn = null;
        
        cardTitles.forEach(title => {
            if (title.textContent.includes('系统消息')) {
                markAllReadBtn = title.parentElement.querySelector('button');
            }
        });
        
        if (markAllReadBtn) {
            markAllReadBtn.addEventListener('click', function() {
                            markAllAsRead(window.messages);
            renderDashboardMessages(window.messages.slice(0, 3));
                showNotification('操作成功', '所有消息已标记为已读', 'success');
            });
        }
        
        // 查看全部消息
        const viewAllMessagesBtn = document.querySelector('.card-footer a[href="#messages"]');
        if (viewAllMessagesBtn) {
            viewAllMessagesBtn.addEventListener('click', function(e) {
                e.preventDefault();
                showAllMessages(window.messages);
            });
        }
        
        // 消息中心内的标记全部已读
        document.getElementById('mark-all-read').addEventListener('click', function() {
            markAllAsRead(window.messages);
            renderAllMessages(window.messages, document.getElementById('message-filter').value || 'all');
            updateUnreadCount(window.messages);
            showNotification('操作成功', '所有消息已标记为已读', 'success');
        });
        
        // 消息筛选
        document.getElementById('message-filter').addEventListener('change', function() {
            renderAllMessages(window.messages, this.value);
        });
        
        // 通知图标点击事件
        const notificationIcon = document.querySelector('.notification-icon');
        if (notificationIcon) {
            notificationIcon.addEventListener('click', function() {
                showAllMessages(window.messages);
            });
        }
    }
    
    // 渲染首页消息
    function renderDashboardMessages(messages) {
        const cardTitles = document.querySelectorAll('.card-title');
        let messageContainer = null;
        
        cardTitles.forEach(title => {
            if (title.textContent.includes('系统消息')) {
                messageContainer = title.parentElement.nextElementSibling;
            }
        });
        
        if (!messageContainer) return;
        messageContainer.innerHTML = '';
        
        messages.forEach(message => {
            const backgroundColor = message.status === 'unread' ? 'rgba(26, 41, 128, 0.05)' : 'transparent';
        
        // 决定图标和背景颜色
        let iconBackground, iconSvg;
        if (message.type === 'verification') {
            iconBackground = 'var(--primary-color)';
            iconSvg = '<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z" /></svg>';
        } else if (message.type === 'blockchain') {
            iconBackground = 'var(--success-color)';
            iconSvg = '<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" /></svg>';
        } else if (message.type === 'system') {
            iconBackground = 'var(--primary-light)';
            iconSvg = '<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" /></svg>';
        }
        
            messageContainer.innerHTML += `
                <div class="message-item" style="border-bottom: 1px solid var(--border-color); padding: 15px 20px; display: flex; align-items: flex-start; background-color: ${backgroundColor}; cursor: pointer;" data-id="${message.id}">
                <div style="width: 40px; height: 40px; border-radius: 50%; background-color: ${iconBackground}; color: white; display: flex; align-items: center; justify-content: center; margin-right: 15px; flex-shrink: 0;">
                    ${iconSvg}
                </div>
                <div style="flex: 1;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <h4 style="font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">${message.title}</h4>
                        <span style="font-size: 0.8rem; color: var(--text-color);">${message.date}</span>
                    </div>
                        <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 10px;">${message.content.length > 80 ? message.content.substring(0, 80) + '...' : message.content}</p>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        ${message.badge ? `<span class="badge badge-${message.badgeType}">${message.badge}</span>` : ''}
                            ${message.link ? `<a href="#" class="view-message-detail" data-id="${message.id}" style="font-size: 0.8rem; color: var(--primary-color); text-decoration: none;">查看详情</a>` : ''}
                    </div>
                </div>
            </div>
        `;
        });
        
        // 绑定消息点击事件
        bindMessageEvents(messages);
    }
    
    // 渲染所有消息
    function renderAllMessages(messages, filter = 'all') {
        const allMessagesContent = document.getElementById('all-messages-content');
        allMessagesContent.innerHTML = '';
        
        // 筛选消息
        let filteredMessages = [...messages];
        if (filter === 'unread') {
            filteredMessages = filteredMessages.filter(msg => msg.status === 'unread');
        } else if (filter === 'system') {
            filteredMessages = filteredMessages.filter(msg => msg.type === 'system');
        } else if (filter === 'verification') {
            filteredMessages = filteredMessages.filter(msg => msg.type === 'verification');
        }
        
        if (filteredMessages.length === 0) {
            allMessagesContent.innerHTML = `<div style="text-align: center; padding: 30px;"><p>暂无消息</p></div>`;
            return;
        }
        
        filteredMessages.forEach(message => {
            const backgroundColor = message.status === 'unread' ? 'rgba(26, 41, 128, 0.05)' : 'transparent';
            
            // 决定图标和背景颜色
            let iconBackground, iconSvg;
            if (message.type === 'verification') {
                iconBackground = 'var(--primary-color)';
                iconSvg = '<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z" /></svg>';
            } else if (message.type === 'blockchain') {
                iconBackground = 'var(--success-color)';
                iconSvg = '<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" /></svg>';
            } else if (message.type === 'system') {
                iconBackground = 'var(--primary-light)';
                iconSvg = '<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" /></svg>';
            }
            
            allMessagesContent.innerHTML += `
                <div class="message-item" style="border-bottom: 1px solid var(--border-color); padding: 15px 20px; display: flex; align-items: flex-start; background-color: ${backgroundColor}; cursor: pointer;" data-id="${message.id}">
                    <div style="width: 40px; height: 40px; border-radius: 50%; background-color: ${iconBackground}; color: white; display: flex; align-items: center; justify-content: center; margin-right: 15px; flex-shrink: 0;">
                        ${iconSvg}
                    </div>
                    <div style="flex: 1;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <h4 style="font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">${message.title}</h4>
                            <span style="font-size: 0.8rem; color: var(--text-color);">${message.date}</span>
                        </div>
                        <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 10px;">${message.content}</p>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            ${message.badge ? `<span class="badge badge-${message.badgeType}">${message.badge}</span>` : ''}
                            <button class="mark-message-btn" data-id="${message.id}" style="margin-left: auto; background: none; border: none; font-size: 0.8rem; color: var(--primary-color); cursor: pointer;">${message.status === 'unread' ? '标记已读' : '标记未读'}</button>
                        </div>
                    </div>
                    ${message.status === 'unread' ? `<div style="width: 8px; height: 8px; background-color: var(--primary-color); border-radius: 50%; margin-left: 10px; flex-shrink: 0;"></div>` : ''}
                </div>
            `;
        });
        
        // 绑定消息点击和标记已读/未读事件
        bindMessageEvents(messages);
        bindMarkReadEvents(messages);
    }
    
    // 显示所有消息
    function showAllMessages(messages) {
        // 重置筛选条件
        document.getElementById('message-filter').value = 'all';
        
        // 渲染所有消息
        renderAllMessages(messages, 'all');
        
        // 显示模态框
        showModal('all-messages-modal');
    }
    
    // 绑定消息点击事件
    function bindMessageEvents(messages) {
        document.querySelectorAll('.message-item').forEach(item => {
            item.addEventListener('click', function() {
                const messageId = parseInt(this.getAttribute('data-id'));
                showMessageDetail(messages, messageId);
            });
        });
        
        document.querySelectorAll('.view-message-detail').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation(); // 阻止冒泡，避免触发消息项点击
                const messageId = parseInt(this.getAttribute('data-id'));
                showMessageDetail(messages, messageId);
            });
        });
    }
    
    // 绑定标记已读/未读事件
    function bindMarkReadEvents(messages) {
        document.querySelectorAll('.mark-message-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation(); // 阻止冒泡，避免触发消息项点击
                
                const messageId = parseInt(this.getAttribute('data-id'));
                const message = messages.find(msg => msg.id === messageId);
                
        if (message) {
                    // 切换状态
                    message.status = message.status === 'unread' ? 'read' : 'unread';
                    
                    // 更新消息列表显示
                    renderAllMessages(messages, document.getElementById('message-filter').value || 'all');
                    
                    // 更新未读消息数量
                    updateUnreadCount(messages);
                    
                    // 通知
                    showNotification('状态已更新', message.status === 'read' ? '消息已标记为已读' : '消息已标记为未读', 'success');
                }
            });
        });
    }
    
    // 显示消息详情
    function showMessageDetail(messages, messageId) {
        const message = messages.find(msg => msg.id === messageId);
                
                if (message) {
                    // 标记为已读
                    if (message.status === 'unread') {
                message.status = 'read';
                updateUnreadCount(messages);
                    }
                    
                    // 设置详情内容
                    const detailTitle = document.getElementById('message-detail-title');
                    const detailContent = document.getElementById('message-detail-content');
                    
                    detailTitle.textContent = message.title;
                    
                    // 根据消息类型设置不同的详情内容
                    if (message.type === 'verification') {
                        // 从消息内容中提取企业名称和时间
                        const companyMatch = message.content.match(/(.+?)已使用/);
                        const timeMatch = message.content.match(/验证时间：(.+)/);
                        const company = companyMatch ? companyMatch[1] : '未知企业';
                        const verifyTime = timeMatch ? timeMatch[1] : '未知时间';
                        
                        detailContent.innerHTML = `
                            <div style="margin-bottom: 20px;">
                                <p style="margin-bottom: 15px; line-height: 1.6;">${message.content}</p>
                                <div style="display: flex; gap: 10px; margin-top: 10px;">
                                    <span class="badge badge-${message.badgeType}">${message.badge}</span>
                                    <span style="font-size: 0.9rem; color: var(--text-color);">${message.date}</span>
                                </div>
                            </div>
                            <div style="padding: 15px; background-color: rgba(33, 150, 243, 0.05); border-radius: 8px; margin-bottom: 20px;">
                                <h4 style="font-size: 1rem; margin-bottom: 10px; color: var(--dark-color);">核验详情</h4>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                    <div>
                                        <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">核验企业</p>
                                        <p style="font-size: 0.95rem; font-weight: 500; color: var(--dark-color);">${company}</p>
                                    </div>
                                    <div>
                                        <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">核验时间</p>
                                        <p style="font-size: 0.95rem; font-weight: 500; color: var(--dark-color);">${verifyTime}</p>
                                    </div>
                                    <div>
                                        <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">核验结果</p>
                                        <p style="font-size: 0.95rem; font-weight: 500; color: var(--success-color);">验证成功</p>
                                    </div>
                                    <div>
                                        <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">证书编号</p>
                                        <p style="font-size: 0.9rem; font-family: monospace; color: var(--dark-color);">202409151234567890</p>
                                    </div>
                                </div>
                            </div>
                            <div style="padding: 15px; background-color: rgba(0, 200, 83, 0.05); border-radius: 8px; margin-bottom: 20px;">
                                <h4 style="font-size: 1rem; margin-bottom: 10px; color: var(--dark-color);">核验说明</h4>
                                <p style="margin: 0; font-size: 0.9rem; color: var(--text-color); line-height: 1.5;">
                                    • 企业已成功使用您授权的证书编号完成学历核验<br>
                                    • 核验过程完全保密，仅验证证书真伪<br>
                                    • 核验结果已记录在区块链上，确保可信度<br>
                                    • 您可以在授权管理中查看详细的核验记录
                                </p>
                            </div>
                            <div style="text-align: center;">
                                <button class="view-authorization-btn" style="display: inline-block; padding: 8px 20px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; cursor: pointer;">查看授权详情</button>
                            </div>
                        `;
                
                        // 绑定查看授权按钮
                        setTimeout(() => {
                            document.querySelector('.view-authorization-btn').addEventListener('click', function() {
                                // 关闭消息详情
                                closeAllModals();
                                
                                // 显示授权详情
                                setTimeout(() => {
                                    showAuthorizationDetails(company, '已使用', '本科学历证书核验授权', '创建时间: 2024-09-15', '有效期: 2024-10-15');
                                }, 100);
                            });
                        }, 0);
                    } else if (message.type === 'blockchain') {
                        detailContent.innerHTML = `
                            <div style="margin-bottom: 20px;">
                                <p style="margin-bottom: 15px; line-height: 1.6;">${message.content}</p>
                                <div style="display: flex; gap: 10px; margin-top: 10px;">
                                    <span class="badge badge-${message.badgeType}">${message.badge}</span>
                                    <span style="font-size: 0.9rem; color: var(--text-color);">${message.date}</span>
                                </div>
                            </div>
                            <div style="padding: 15px; background-color: rgba(0, 0, 0, 0.02); border-radius: 8px; margin-bottom: 20px;">
                                <h4 style="font-size: 1rem; margin-bottom: 10px; color: var(--dark-color);">区块链信息</h4>
                                <div style="margin-bottom: 10px;">
                                    <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">区块高度</p>
                                    <p style="font-size: 0.95rem; font-weight: 500; color: var(--dark-color);">#1286390</p>
                                </div>
                                <div style="margin-bottom: 10px;">
                                    <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">交易哈希</p>
                                    <p style="font-size: 0.9rem; font-family: monospace; color: var(--dark-color); overflow-wrap: break-word;">0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b</p>
                                </div>
                                <div>
                                    <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">上链时间</p>
                                    <p style="font-size: 0.95rem; font-weight: 500; color: var(--dark-color);">2024-09-15 09:15:47</p>
                                </div>
                            </div>
                            <div style="text-align: center;">
                        <button class="view-certificate-btn" style="display: inline-block; padding: 8px 20px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px;">查看证书</button>
                        <button class="view-explorer-btn" style="display: inline-block; padding: 8px 20px; background-color: white; color: var(--primary-color); border: 1px solid var(--primary-color); border-radius: 5px; cursor: pointer;">区块链浏览器</button>
                            </div>
                        `;
                
                // 绑定按钮事件
                setTimeout(() => {
                    document.querySelector('.view-certificate-btn').addEventListener('click', function() {
                        // 关闭消息详情
                        closeAllModals();
                        
                        // 切换到证书页面
                        document.querySelector('.nav-link[href="#education"]').click();
                        
                        // 展示对应证书详情
                        setTimeout(() => {
                            const certificateCard = document.querySelectorAll('.certificate-card')[1]; // 硕士证书
                            if (certificateCard) {
                                showCertificateDetails(certificateCard);
                            }
                        }, 500);
                    });
                    
                    document.querySelector('.view-explorer-btn').addEventListener('click', function() {
                        window.open('https://www.fishcoim.com/block/1286390', '_blank');
                    });
                }, 0);
                    } else {
                        // 系统消息
                        detailContent.innerHTML = `
                            <div>
                                <p style="margin-bottom: 20px; line-height: 1.6;">${message.content}</p>
                                <div style="display: flex; gap: 10px; margin-top: 15px;">
                                    <span class="badge badge-${message.badgeType}">${message.badge}</span>
                                    <span style="font-size: 0.9rem; color: var(--text-color);">${message.date}</span>
                                </div>
                            </div>
                        `;
                    }
                    
                    // 显示模态框
                    showModal('message-detail-modal');
                    
                    // 更新消息列表显示
            renderDashboardMessages(messages.slice(0, 3));
            
            // 更新消息中心
                    if (document.getElementById('all-messages-modal').style.display === 'block') {
                renderAllMessages(messages, document.getElementById('message-filter').value || 'all');
            }
        }
    }
    
    // 更新未读消息数量
    function updateUnreadCount(messages) {
        const unreadCount = messages.filter(msg => msg.status === 'unread').length;
        const badge = document.querySelector('.notification-badge');
        
        if (badge) {
            badge.textContent = unreadCount;
            badge.style.display = unreadCount > 0 ? 'flex' : 'none';
        }
    }
    
    // 标记所有消息为已读
    function markAllAsRead(messages) {
        messages.forEach(message => {
            message.status = 'read';
        });
        
        updateUnreadCount(messages);
    }
    
    // 模拟企业使用授权码完成核验的通知
    function simulateVerificationNotification() {
        // 模拟企业使用授权码的通知
        const verificationMessages = [
            {
                id: Date.now() + 1,
                type: 'verification',
                title: '授权核验通知',
                content: '腾讯科技已使用您的学历证书核验授权完成验证，验证时间：2024-09-18 14:30',
                date: '2分钟前',
                status: 'unread',
                badge: '核验完成',
                badgeType: 'success',
                link: true
            },
            {
                id: Date.now() + 2,
                type: 'verification',
                title: '授权核验通知',
                content: '阿里巴巴集团已使用您的学历证书核验授权完成验证，验证时间：2024-09-20 09:15',
                date: '1小时前',
                status: 'unread',
                badge: '核验完成',
                badgeType: 'success',
                link: true
            },
            {
                id: Date.now() + 3,
                type: 'system',
                title: '系统公告',
                content: '学链通平台已升级至v2.1版本，新增授权管理功能，支持企业核验通知',
                date: '3小时前',
                status: 'read',
                badge: '系统',
                badgeType: 'primary'
            }
        ];
        
        // 将新消息添加到消息列表
        window.messages.unshift(...verificationMessages);
        
        // 更新消息显示
        renderDashboardMessages(window.messages.slice(0, 3));
        
        // 更新消息数量
        updateUnreadCount(window.messages);
        
        // 显示通知
        setTimeout(() => {
            showNotification('核验通知', '企业已使用您的授权完成学历核验', 'info');
        }, 1000);
    }
    
    // 启动模拟核验通知
    setTimeout(simulateVerificationNotification, 3000);
</script>

    <script>
    // 隐私设置面板功能
    document.addEventListener('DOMContentLoaded', function() {
        // 初始化隐私设置
        initPrivacySettings();
    });
    
    // 初始化隐私设置功能
    function initPrivacySettings() {
        // 保存设置按钮
        document.getElementById('save-privacy').addEventListener('click', function() {
            savePrivacySettings();
        });
        
        // 查看隐私设置
        const privacyBtn = document.querySelector('.nav-link[href="#privacy"]');
        if (privacyBtn) {
            privacyBtn.addEventListener('click', function(e) {
                e.preventDefault();
                showPrivacySettings();
            });
        }
        
        // 欢迎卡片上的隐私设置按钮
        const welcomePrivacyBtn = document.querySelector('.card[style*="linear-gradient"] button:nth-child(2)');
        if (welcomePrivacyBtn) {
            welcomePrivacyBtn.addEventListener('click', function() {
                showPrivacySettings();
            });
        }
        
        // 为证书隐私下拉框添加事件监听
        document.querySelectorAll('.privacy-setting').forEach(select => {
            select.addEventListener('change', function() {
                const certificateType = this.getAttribute('data-certificate');
                const privacyLevel = this.value;
                
                
                // 显示预览效果
                showPrivacyPreview(certificateType, privacyLevel);
            });
        });
        
        // 为自动批准复选框添加事件监听
        document.getElementById('auto-approve').addEventListener('change', function() {
            const isChecked = this.checked;
            
            // 如果启用自动批准，则禁用新验证请求通知
            if (isChecked) {
                const notifyCheckbox = document.getElementById('notify-new-verification');
                notifyCheckbox.checked = false;
                notifyCheckbox.disabled = true;
                notifyCheckbox.parentElement.style.opacity = '0.5';
            } else {
                const notifyCheckbox = document.getElementById('notify-new-verification');
                notifyCheckbox.disabled = false;
                notifyCheckbox.parentElement.style.opacity = '1';
            }
        });
    }
    
    // 显示隐私设置模态框
    function showPrivacySettings() {
        showModal('privacy-modal');
    }
    
    // 保存隐私设置
    function savePrivacySettings() {
        // 收集所有设置
        const settings = {
            certificates: {
                bachelor: document.querySelector('.privacy-setting[data-certificate="bachelor"]').value,
                master: document.querySelector('.privacy-setting[data-certificate="master"]').value
            },
            verification: {
                autoApprove: document.getElementById('auto-approve').checked,
                notifyNewVerification: document.getElementById('notify-new-verification').checked
            },
            dataSharing: {
                shareEducation: document.getElementById('share-education').checked,
                shareGrades: document.getElementById('share-grades').checked,
                shareAwards: document.getElementById('share-awards').checked
            }
        };
        
        
        // 关闭模态框
        closeAllModals();
        
        // 显示成功通知
        showNotification('设置已保存', '您的隐私设置已成功更新', 'success');
        
        // 根据设置更新UI显示
        updateUIBasedOnPrivacySettings(settings);
    }
    
    // 显示隐私预览效果
    function showPrivacyPreview(certificateType, privacyLevel) {
        // 获取对应证书卡片
        const certificateIndex = certificateType === 'bachelor' ? 0 : 1;
        const certificateCard = document.querySelectorAll('.certificate-card')[certificateIndex];
        
        if (certificateCard) {
            // 移除之前的标记
            certificateCard.querySelectorAll('.privacy-indicator').forEach(indicator => {
                indicator.remove();
            });
            
            // 添加隐私级别指示器
            const indicator = document.createElement('div');
            indicator.className = 'privacy-indicator';
            
            if (privacyLevel === 'public') {
                indicator.innerHTML = `
                    <div style="position: absolute; top: 15px; left: 15px; background-color: rgba(0, 200, 83, 0.1); color: var(--success-color); font-size: 0.7rem; padding: 3px 8px; border-radius: 10px; display: flex; align-items: center;">
                        <svg viewBox="0 0 24 24" width="12" height="12" fill="currentColor" style="margin-right: 4px;">
                            <path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M12,10A5,5 0 0,1 17,15A5,5 0 0,1 12,20A5,5 0 0,1 7,15A5,5 0 0,1 12,10M12,4.5C14.76,4.5 17,6.3 17,8.5V9H7V8.5C7,6.3 9.24,4.5 12,4.5M12,2A6.5,6.5 0 0,0 5.5,8.5V9H4A2,2 0 0,0 2,11V22H22V11A2,2 0 0,0 20,9H18.5V8.5A6.5,6.5 0 0,0 12,2Z" />
                        </svg>
                        公开
                </div>
                `;
                certificateCard.style.opacity = '1';
            } else if (privacyLevel === 'contacts') {
                indicator.innerHTML = `
                    <div style="position: absolute; top: 15px; left: 15px; background-color: rgba(255, 152, 0, 0.1); color: var(--warning-color); font-size: 0.7rem; padding: 3px 8px; border-radius: 10px; display: flex; align-items: center;">
                        <svg viewBox="0 0 24 24" width="12" height="12" fill="currentColor" style="margin-right: 4px;">
                            <path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M12,10A5,5 0 0,1 17,15A5,5 0 0,1 12,20A5,5 0 0,1 7,15A5,5 0 0,1 12,10M12,4.5C14.76,4.5 17,6.3 17,8.5V9H7V8.5C7,6.3 9.24,4.5 12,4.5M12,2A6.5,6.5 0 0,0 5.5,8.5V9H4A2,2 0 0,0 2,11V22H22V11A2,2 0 0,0 20,9H18.5V8.5A6.5,6.5 0 0,0 12,2Z" />
                        </svg>
                        受限
                    </div>
                `;
                certificateCard.style.opacity = '0.8';
            } else {
                indicator.innerHTML = `
                    <div style="position: absolute; top: 15px; left: 15px; background-color: rgba(255, 82, 82, 0.1); color: var(--danger-color); font-size: 0.7rem; padding: 3px 8px; border-radius: 10px; display: flex; align-items: center;">
                        <svg viewBox="0 0 24 24" width="12" height="12" fill="currentColor" style="margin-right: 4px;">
                            <path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M12,10A5,5 0 0,1 17,15A5,5 0 0,1 12,20A5,5 0 0,1 7,15A5,5 0 0,1 12,10M12,4.5C14.76,4.5 17,6.3 17,8.5V9H7V8.5C7,6.3 9.24,4.5 12,4.5M12,2A6.5,6.5 0 0,0 5.5,8.5V9H4A2,2 0 0,0 2,11V22H22V11A2,2 0 0,0 20,9H18.5V8.5A6.5,6.5 0 0,0 12,2Z" />
                        </svg>
                        私密
            </div>
        `;
                certificateCard.style.opacity = '0.6';
            }
            
            certificateCard.appendChild(indicator.firstElementChild);
            
            // 应用过渡效果
            certificateCard.style.transition = 'opacity 0.3s ease';
        }
    }
    
    // 根据隐私设置更新UI
    function updateUIBasedOnPrivacySettings(settings) {
        // 更新证书卡片显示
        settings.certificates.bachelor && showPrivacyPreview('bachelor', settings.certificates.bachelor);
        settings.certificates.master && showPrivacyPreview('master', settings.certificates.master);
        
        // 在实际应用中，这里还会更新其他UI元素
        // 比如根据数据共享设置隐藏或显示某些信息
        if (!settings.dataSharing.shareGrades) {
            // 隐藏成绩相关信息
            document.querySelectorAll('.certificate-card .gpa-info').forEach(el => {
                el.style.display = 'none';
            });
        }
        
        if (!settings.dataSharing.shareAwards) {
            // 隐藏奖项信息
            document.querySelectorAll('.certificate-card .awards-info').forEach(el => {
                el.style.display = 'none';
            });
        }
    }




    // =============== 统一事件管理器 ===============
    const EventManager = {
        listeners: new Map(),
        
        // 注册事件监听器
        register: function(eventName, element, handler, options = {}) {
            const eventKey = `${eventName}_${element.tagName}_${Date.now()}`;
            
            // 包装处理函数以便追踪
            const wrappedHandler = function(e) {
    
                try {
                    return handler.call(this, e);
                } catch (error) {
                    console.error(`事件处理器错误 (${eventName}):`, error);
                }
            };
            
            // 添加事件监听器
            element.addEventListener(eventName, wrappedHandler, options);
            
            // 存储引用以便清理
            this.listeners.set(eventKey, {
                element: element,
                eventName: eventName,
                handler: wrappedHandler,
                originalHandler: handler,
                options: options
            });
            
            return eventKey;
        },
        
        // 移除事件监听器
        unregister: function(eventKey) {
            const listener = this.listeners.get(eventKey);
            if (listener) {
                listener.element.removeEventListener(listener.eventName, listener.handler, listener.options);
                this.listeners.delete(eventKey);

                return true;
            }
            return false;
        },
        
        // 清理特定元素的所有事件
        clearElement: function(element) {
            let count = 0;
            this.listeners.forEach((listener, key) => {
                if (listener.element === element) {
                    this.unregister(key);
                    count++;
                }
            });

            return count;
        },
        
        // 清理所有事件
        clearAll: function() {
            const count = this.listeners.size;
            this.listeners.forEach((listener, key) => {
                listener.element.removeEventListener(listener.eventName, listener.handler, listener.options);
            });
            this.listeners.clear();

        },
        
        // 委托事件处理
        delegate: function(container, selector, eventName, handler) {
            return this.register(eventName, container, function(e) {
                const target = e.target.closest(selector);
                if (target && container.contains(target)) {
                    handler.call(target, e);
                }
            });
        }
    };

    // =============== 证书交互管理器 ===============
    const CertificateManager = {
        initialized: false,
        
        init: function() {
            if (this.initialized) {
                console.log('CertificateManager 已经初始化，跳过');
                return;
            }
            
            console.log('正在初始化 CertificateManager...');
            
            // 证书模态框已在HTML中定义，无需创建
            
            // 初始化事件
            this.initEvents();
            this.initCardEffects();
            
            this.initialized = true;
            console.log('CertificateManager 初始化完成');
        },
        
        initEvents: function() {
            console.log('正在初始化证书管理器事件...');
            
            // 使用事件委托统一处理所有证书相关按钮
            console.log('绑定证书卡片按钮事件委托...');
            EventManager.delegate(document, '.certificate-card button', 'click', this.handleButtonClick.bind(this));
            
            // 模态框关闭按钮已在主事件处理器中处理
            
            // 处理"查看全部"按钮
            EventManager.delegate(document, '.card-title', 'click', function(e) {
                const button = this.parentElement.querySelector('button');
                if (button && this.textContent.includes('我的学历证书')) {
                    CertificateManager.showAllCertificates();
                }
            });
            
            console.log('证书管理器事件初始化完成');
        },
        
        initCardEffects: function() {
            // 为证书卡片添加悬停效果
            const certificateCards = document.querySelectorAll('.certificate-card');

            
            certificateCards.forEach(card => {
                EventManager.register('mouseenter', card, function() {
                    this.style.transform = 'translateY(-5px)';
                    this.style.boxShadow = 'var(--shadow-md)';
                });
                
                EventManager.register('mouseleave', card, function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = 'var(--shadow-sm)';
                });
                
                EventManager.register('mousedown', card, function() {
                    this.style.transform = 'scale(0.98)';
                });
                
                EventManager.register('mouseup', card, function() {
                    this.style.transform = 'translateY(-5px)';
                });
                
                // 添加验证标记动画
                this.addVerificationIconEffects(card);
            });
        },
        
        handleButtonClick: function(e) {
            console.log('CertificateManager.handleButtonClick 被调用');
            e.preventDefault();
            e.stopPropagation();
            
            const button = e.target;
            const card = button.closest('.certificate-card');
            const buttonText = button.textContent.trim();
            
            console.log('按钮文本:', buttonText);
            console.log('找到的卡片:', card);
            
            if (!card) {
                console.warn('找不到证书卡片容器');
                return;
            }
            
            const titleElement = card.querySelector('h4');
            const certificateTitle = titleElement ? titleElement.textContent.trim() : '未知证书';
            console.log('证书标题元素:', titleElement);
            console.log('证书标题:', certificateTitle);
            
            
            
            // 根据按钮文本执行相应操作
            if (buttonText.includes('查看详情') || buttonText.includes('查看详细')) {
                console.log('准备调用 showDetail, 参数:', certificateTitle, card);
                CertificateManager.showDetail(certificateTitle, card);
            } else if (buttonText.includes('下载证书')) {
                CertificateManager.downloadCertificate(certificateTitle);
            } else {
                console.log('未识别的按钮操作:', buttonText);
            }
        },
        
        addVerificationIconEffects: function(card) {
            const verifyIcon = card.querySelector('svg[fill="var(--success-color)"]');
            if (verifyIcon) {
                // 添加悬停提示
                const tooltip = document.createElement('div');
                tooltip.className = 'verify-tooltip';
                tooltip.innerHTML = `
                    <div style="position: absolute; top: -40px; right: 0; background-color: rgba(0, 0, 0, 0.8); 
                                color: white; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem;
                                opacity: 0; transition: opacity 0.3s; pointer-events: none;">
                        已通过区块链验证
                    </div>
                `;
                verifyIcon.parentNode.appendChild(tooltip);
                
                EventManager.register('mouseenter', verifyIcon.parentNode, function() {
                    tooltip.querySelector('div').style.opacity = '1';
                    verifyIcon.style.transform = 'scale(1.2)';
                });
                
                EventManager.register('mouseleave', verifyIcon.parentNode, function() {
                    tooltip.querySelector('div').style.opacity = '0';
                    verifyIcon.style.transform = 'scale(1)';
                });
                
                verifyIcon.style.transition = 'transform 0.3s';
            }
        },
        
        showDetail: function(certificateTitle, card) {
            console.log('CertificateManager.showDetail 被调用, 参数:', certificateTitle, card);
            
            const isUndergraduate = certificateTitle.includes('本科');
            console.log('是否为本科证书:', isUndergraduate);
            
            // 直接生成内容，不依赖外部方法
            const contentHtml = this.createDetailContent(certificateTitle, isUndergraduate);
            console.log('生成的HTML长度:', contentHtml.length);
            
            // 更新模态框内容并显示
            const contentElement = document.getElementById('certificate-content');
            console.log('找到的内容元素:', contentElement);
            
            if (contentElement) {
                contentElement.innerHTML = contentHtml;
                console.log('已更新模态框内容');
            } else {
                console.error('未找到 certificate-content 元素');
                return;
            }
            
            // 显示模态框
            console.log('准备显示模态框: certificate-modal');
            showModal('certificate-modal');
            
            // 绑定模态框内的事件
            this.bindDetailEvents(certificateTitle, isUndergraduate);
        },
        
        // 创建证书详情内容
        createDetailContent: function(certificateTitle, isUndergraduate) {
            const studentInfo = {
                name: '张力',
                studentId: isUndergraduate ? '2018110101' : '2022210101',
                major: '计算机科学与技术',
                admissionDate: isUndergraduate ? '2018-09-01' : '2022-09-01',
                degree: isUndergraduate ? '工学学士' : '工学硕士',
                graduationDate: isUndergraduate ? '2022-06-30' : '在读',
                blockHeight: isUndergraduate ? '1286388' : '1286390',
                txHash: isUndergraduate ? '0x7a8b9c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b' : '0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b',
                blockchainTime: isUndergraduate ? '2022-07-02 14:30:22' : '2024-09-15 09:15:47'
            };
            
         return `
             <div style="text-align: center; margin-bottom: 25px;">
                 <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xMiAxOUwxOSAxMi41MzQ1VjVMMTIgMTEuNUw1IDVWMTIuNTM0NUwxMiAxOVoiIHN0cm9rZT0iIzFBMjk4MCIgc3Ryb2tlLXdpZHRoPSIyIiAvPjwvc3ZnPg==" alt="学链通大学校徽" style="width: 120px; height: 120px; margin-bottom: 10px;">
                 <h2 style="font-size: 1.8rem; color: var(--dark-color); margin-bottom: 5px;">学链通大学</h2>
                 <h3 style="font-size: 1.3rem; font-weight: 500; color: var(--text-color); margin: 0;">${certificateTitle}</h3>
             </div>
             
                <div style="background-color: #f8f9fa; border-radius: 10px; padding: 20px; margin-bottom: 25px;">
                    <h4 style="font-size: 1.1rem; color: var(--dark-color); margin-bottom: 15px; text-align: center;">学生信息</h4>
                 <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div style="text-align: center;">
                         <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">姓名</p>
                            <p style="font-size: 1rem; font-weight: 500; color: var(--dark-color); margin: 0;">${studentInfo.name}</p>
                     </div>
                        <div style="text-align: center;">
                         <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">学号</p>
                            <p style="font-size: 1rem; font-weight: 500; color: var(--dark-color); margin: 0;">${studentInfo.studentId}</p>
                     </div>
                        <div style="text-align: center;">
                         <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">专业</p>
                            <p style="font-size: 1rem; font-weight: 500; color: var(--dark-color); margin: 0;">${studentInfo.major}</p>
                     </div>
                        <div style="text-align: center;">
                         <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">学位</p>
                            <p style="font-size: 1rem; font-weight: 500; color: var(--dark-color); margin: 0;">${studentInfo.degree}</p>
                     </div>
                        <div style="text-align: center;">
                            <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">入学时间</p>
                            <p style="font-size: 1rem; font-weight: 500; color: var(--dark-color); margin: 0;">${studentInfo.admissionDate}</p>
                        </div>
                        <div style="text-align: center;">
                         <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">毕业时间</p>
                            <p style="font-size: 1rem; font-weight: 500; color: var(--dark-color); margin: 0;">${studentInfo.graduationDate}</p>
                     </div>
                 </div>
             </div>
             
                <div style="background-color: #e3f2fd; border-radius: 10px; padding: 20px; margin-bottom: 25px;">
                    <h4 style="font-size: 1.1rem; color: var(--dark-color); margin-bottom: 15px; text-align: center;">区块链验证信息</h4>
                    <div style="margin-bottom: 15px;">
                     <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">区块高度</p>
                        <p style="font-size: 1rem; font-weight: 500; color: var(--dark-color); margin: 0;">#${studentInfo.blockHeight}</p>
                 </div>
                    <div style="margin-bottom: 15px;">
                     <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">交易哈希</p>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <p style="font-size: 0.9rem; font-family: monospace; word-break: break-all; color: var(--dark-color); margin: 0; flex: 1; background: white; padding: 8px; border-radius: 5px;">${studentInfo.txHash}</p>
                            <button id="copy-hash-btn" style="background: var(--primary-color); color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; font-size: 0.8rem;">复制</button>
                     </div>
                 </div>
                    <div style="margin-bottom: 15px;">
                     <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">上链时间</p>
                        <p style="font-size: 1rem; font-weight: 500; color: var(--dark-color); margin: 0;">${studentInfo.blockchainTime}</p>
                    </div>
                    <div style="text-align: center;">
                        <button id="verify-blockchain-btn" style="background: var(--success-color); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">验证真实性</button>
                 </div>
             </div>
             
             <div style="background-color: rgba(0, 200, 83, 0.05); border-radius: 10px; padding: 20px; display: flex; align-items: center; margin-bottom: 25px;">
                 <div style="width: 40px; height: 40px; border-radius: 50%; background-color: var(--success-color); color: white; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                     <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                         <path d="M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z" />
                     </svg>
                 </div>
                 <div>
                        <h4 style="font-size: 1rem; color: var(--dark-color); margin-bottom: 5px;">区块链验证通过</h4>
                        <p style="font-size: 0.85rem; color: var(--text-color); margin: 0;">该证书已通过区块链验证，信息真实可靠。验证时间: ${new Date().toLocaleString()}</p>
                 </div>
             </div>
             
             <div style="display: flex; gap: 15px; justify-content: center;">
                    <button id="download-cert-btn" style="padding: 12px 25px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; font-weight: 500; cursor: pointer; display: flex; align-items: center;">
                     <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" style="margin-right: 8px;">
                         <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
                     </svg>
                     下载证书
                 </button>
                    <button id="share-cert-btn" style="padding: 12px 25px; background-color: white; color: var(--primary-color); border: 1px solid var(--primary-color); border-radius: 5px; font-weight: 500; cursor: pointer; display: flex; align-items: center;">
                     <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" style="margin-right: 8px;">
                         <path d="M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z" />
                     </svg>
                     分享证书
                 </button>
             </div>
         `;
        },
        
        // 绑定详情页面事件
        bindDetailEvents: function(certificateTitle, isUndergraduate) {
            console.log('绑定详情页面事件...');
            
            // 复制哈希按钮
            const copyBtn = document.getElementById('copy-hash-btn');
         if (copyBtn) {
                copyBtn.addEventListener('click', () => {
                 const hash = isUndergraduate ? '0x7a8b9c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b' : '0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b';
                 this.copyToClipboard(hash);
             });
         }
         
            // 验证按钮
            const verifyBtn = document.getElementById('verify-blockchain-btn');
         if (verifyBtn) {
                verifyBtn.addEventListener('click', function() {
                 this.disabled = true;
                 this.innerHTML = '验证中...';
                 
                 setTimeout(() => {
                     this.disabled = false;
                        this.innerHTML = '验证完成 ✓';
                        this.style.backgroundColor = 'var(--success-color)';
                     showNotification('验证完成', '该证书通过了区块链验证，内容真实有效', 'success');
                 }, 2000);
             });
         }
         
            // 下载按钮
            const downloadBtn = document.getElementById('download-cert-btn');
            if (downloadBtn) {
                downloadBtn.addEventListener('click', () => {
                    this.downloadCertificate(certificateTitle);
                });
            }
            
            // 分享按钮
            const shareBtn = document.getElementById('share-cert-btn');
            if (shareBtn) {
                shareBtn.addEventListener('click', () => {
                    const shareUrl = window.location.href + '?certificate=' + encodeURIComponent(certificateTitle);
                    this.copyToClipboard(shareUrl);
                    showNotification('分享成功', '证书链接已复制到剪贴板', 'success');
                });
            }
        },
        
        downloadCertificate: function(certificateTitle) {
            console.log('开始下载证书:', certificateTitle);
        showNotification('正在生成学历证书', `正在生成官方格式的${certificateTitle}，请稍等片刻...`, 'info');
        
        // 模拟PDF生成过程
        setTimeout(() => {
                this.generateCertificatePDF(certificateTitle);
        }, 1500);
        },

        // 生成并下载证书PDF
        generateCertificatePDF: function(certificateTitle) {
        const isUndergraduate = certificateTitle.includes('本科');
        
            // 创建PDF内容（这里使用简单的HTML转PDF模拟）
            const pdfContent = this.createPDFContent(certificateTitle, isUndergraduate);
            
            // 创建一个隐藏的下载链接
            const blob = new Blob([pdfContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `${certificateTitle}_张力_${isUndergraduate ? '2018110101' : '2022210101'}.html`;
            link.style.display = 'none';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // 清理URL对象
            URL.revokeObjectURL(url);
            
            showNotification('下载完成', `${certificateTitle}已下载到您的设备`, 'success');
        },
        
        // 创建PDF内容（HTML格式）
        createPDFContent: function(certificateTitle, isUndergraduate) {
            const studentInfo = {
                name: '张力',
                studentId: isUndergraduate ? '2018110101' : '2022210101',
                major: '计算机科学与技术',
                admissionDate: isUndergraduate ? '2018-09-01' : '2022-09-01',
                degree: isUndergraduate ? '工学学士' : '工学硕士',
                graduationDate: isUndergraduate ? '2022-06-30' : '在读',
                blockHeight: isUndergraduate ? '1286388' : '1286390',
                txHash: isUndergraduate ? '0x7a8b9c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b' : '0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b',
                blockchainTime: isUndergraduate ? '2022-07-02 14:30:22' : '2024-09-15 09:15:47'
            };
            
            return `
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
    <title>${certificateTitle} - 学链通大学</title>
            <style>
                     body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
                         margin: 0;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
                }
                                 .certificate {
                     background: white;
            max-width: 800px;
                     width: 100%;
            padding: 60px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
            border: 10px solid #f8f9fa;
                 }
                .header {
            border-bottom: 3px solid #1a2980;
            padding-bottom: 30px;
                    margin-bottom: 40px;
        }
        .university-name {
            font-size: 2.5rem;
                     font-weight: bold;
            color: #1a2980;
            margin: 20px 0;
        }
        .certificate-title {
            font-size: 2rem;
                    color: #333;
            margin: 20px 0;
                     font-weight: 500;
        }
        .student-info {
            text-align: left;
            background: #f8f9fa;
            padding: 30px;
                     border-radius: 10px;
            margin: 30px 0;
                 }
        .info-row {
                    display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px 0;
            border-bottom: 1px solid #dee2e6;
        }
        .info-label {
                    font-weight: bold;
            color: #495057;
        }
        .info-value {
            color: #212529;
        }
        .blockchain-section {
            background: #e3f2fd;
            padding: 30px;
            border-radius: 10px;
            margin: 30px 0;
            text-align: left;
        }
        .blockchain-title {
            color: #1976d2;
            font-size: 1.2rem;
                    font-weight: bold;
            margin-bottom: 20px;
                     text-align: center;
                 }
        .hash {
            font-family: monospace;
            word-break: break-all;
            background: white;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        .footer {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #dee2e6;
            font-size: 0.9rem;
            color: #6c757d;
        }
        .seal {
            position: absolute;
            bottom: 100px;
            right: 100px;
            width: 120px;
            height: 120px;
            border: 3px solid #dc3545;
                     border-radius: 50%;
                     display: flex;
                     align-items: center;
                     justify-content: center;
            color: #dc3545;
                     font-weight: bold;
            transform: rotate(-15deg);
        }
        @media print {
            body { background: white; }
            .certificate { box-shadow: none; border: 2px solid #333; }
                 }
            </style>
        </head>
                 <body>
             <div class="certificate">
                <div class="header">
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xMiAxOUwxOSAxMi41MzQ1VjVMMTIgMTEuNUw1IDVWMTIuNTM0NUwxMiAxOVoiIHN0cm9rZT0iIzFBMjk4MCIgc3Ryb2tlLXdpZHRoPSIyIiAvPjwvc3ZnPg==" alt="学链通大学校徽" width="120" height="120">
            <div class="university-name">学链通大学</div>
            <div class="certificate-title">${certificateTitle}</div>
                </div>
                
        <div class="student-info">
            <h3 style="text-align: center; margin-top: 0; color: #333;">学生信息</h3>
            <div class="info-row">
                <span class="info-label">姓名：</span>
                <span class="info-value">${studentInfo.name}</span>
                </div>
            <div class="info-row">
                <span class="info-label">学号：</span>
                <span class="info-value">${studentInfo.studentId}</span>
                        </div>
            <div class="info-row">
                <span class="info-label">专业：</span>
                <span class="info-value">${studentInfo.major}</span>
                             </div>
            <div class="info-row">
                <span class="info-label">学位：</span>
                <span class="info-value">${studentInfo.degree}</span>
                         </div>
            <div class="info-row">
                <span class="info-label">入学时间：</span>
                <span class="info-value">${studentInfo.admissionDate}</span>
                    </div>
            <div class="info-row">
                <span class="info-label">毕业时间：</span>
                <span class="info-value">${studentInfo.graduationDate}</span>
                </div>
                </div>
                
        <div class="blockchain-section">
            <div class="blockchain-title">区块链验证信息</div>
            <div class="info-row">
                <span class="info-label">区块高度：</span>
                <span class="info-value">#${studentInfo.blockHeight}</span>
                    </div>
            <div class="info-row">
                <span class="info-label">交易哈希：</span>
                <span class="info-value"><div class="hash">${studentInfo.txHash}</div></span>
            </div>
            <div class="info-row">
                <span class="info-label">上链时间：</span>
                <span class="info-value">${studentInfo.blockchainTime}</span>
                    </div>
                </div>
                
                <div class="footer">
            <p>本证书已通过区块链技术验证，具有法律效力。</p>
            <p>查询网址：https://edu.fiscobcos.org/verify</p>
            <p>生成时间：${new Date().toLocaleString()}</p>
        </div>
        
        <div class="seal">
            学链通<br>验证
                </div>
            </div>
        </body>
</html>`;
        },
        
        showAllCertificates: function() {
           
            // 这里可以调用原有的showAllCertificates函数，或者重构它
            if (typeof showAllCertificates === 'function') {
                showAllCertificates();
            }
        }
    };

         // 页面加载完成后初始化
     document.addEventListener('DOMContentLoaded', function() {
         console.log('DOM加载完成，开始初始化CertificateManager');
         CertificateManager.init();
         
         // 添加测试功能
                        setTimeout(() => {
             console.log('检查证书卡片数量:', document.querySelectorAll('.certificate-card').length);
             console.log('检查证书卡片按钮数量:', document.querySelectorAll('.certificate-card button').length);
             
             // 测试模态框
             const modal = document.getElementById('certificate-modal');
             const contentElement = document.getElementById('certificate-content');
             console.log('证书模态框元素:', modal);
             console.log('证书内容元素:', contentElement);
         }, 1000);
     });
     

     
     CertificateManager.copyToClipboard = function(text) {
         if (navigator.clipboard) {
             navigator.clipboard.writeText(text).then(() => {
                 showNotification('复制成功', '内容已复制到剪贴板', 'success');
             }).catch(() => {
                 this.fallbackCopyToClipboard(text);
             });
            } else {
             this.fallbackCopyToClipboard(text);
         }
     };
     
     CertificateManager.fallbackCopyToClipboard = function(text) {
         const textArea = document.createElement('textarea');
         textArea.value = text;
         textArea.style.position = 'fixed';
         textArea.style.left = '-999999px';
         textArea.style.top = '-999999px';
         document.body.appendChild(textArea);
         textArea.focus();
         textArea.select();
         
         try {
             document.execCommand('copy');
             showNotification('复制成功', '内容已复制到剪贴板', 'success');
         } catch (err) {
             showNotification('复制失败', '请手动复制内容', 'error');
         }
         
         document.body.removeChild(textArea);
     };
     



    </script>

    <script>
    // 兼容旧API - 重定向到新的证书管理器
    function showCertificateDetail(certificateTitle, card) {
       
        CertificateManager.showDetail(certificateTitle, card);
    }
    </script>

    <script>
    // 查看成绩单
    function showTranscript() {
        // 创建成绩单模态框
        const transcriptModal = document.createElement('div');
        transcriptModal.id = 'transcript-modal';
        transcriptModal.className = 'modal';
        transcriptModal.style.cssText = 'display: block; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 10px; width: 90%; max-width: 800px; z-index: 120; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); overflow: hidden;';
        
        // 样例成绩数据
        const coursesData = [
            { code: 'CS101', name: '计算机科学导论', credit: 4, score: 95, grade: 'A+', semester: '2018-2019学年第一学期' },
            { code: 'MA101', name: '高等数学(一)', credit: 5, score: 88, grade: 'A', semester: '2018-2019学年第一学期' },
            { code: 'EN101', name: '大学英语(一)', credit: 3, score: 92, grade: 'A', semester: '2018-2019学年第一学期' },
            { code: 'CS102', name: '程序设计基础', credit: 4, score: 96, grade: 'A+', semester: '2018-2019学年第一学期' },
            { code: 'PH101', name: '大学物理(一)', credit: 4, score: 85, grade: 'B+', semester: '2018-2019学年第一学期' },
            { code: 'CS201', name: '数据结构', credit: 4, score: 94, grade: 'A', semester: '2018-2019学年第二学期' },
            { code: 'MA102', name: '高等数学(二)', credit: 5, score: 90, grade: 'A', semester: '2018-2019学年第二学期' },
            { code: 'CS202', name: '计算机组成原理', credit: 4, score: 87, grade: 'B+', semester: '2018-2019学年第二学期' },
            { code: 'CS301', name: '操作系统', credit: 4, score: 92, grade: 'A', semester: '2019-2020学年第一学期' },
            { code: 'CS302', name: '编译原理', credit: 4, score: 89, grade: 'B+', semester: '2019-2020学年第一学期' },
            { code: 'CS401', name: '区块链原理与应用', credit: 3, score: 96, grade: 'A+', semester: '2020-2021学年第一学期' },
            { code: 'CS402', name: '人工智能', credit: 3, score: 93, grade: 'A', semester: '2020-2021学年第一学期' }
        ];
        
        // 按学期分组
        const semesterGroups = {};
        coursesData.forEach(course => {
            if (!semesterGroups[course.semester]) {
                semesterGroups[course.semester] = [];
            }
            semesterGroups[course.semester].push(course);
        });
        
        // 构建模态框内容
        transcriptModal.innerHTML = `
            <div style="padding: 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; font-size: 1.2rem; color: var(--dark-color);">本科成绩单</h3>
                <button class="modal-close-btn" style="background: none; border: none; cursor: pointer; color: var(--text-color); font-size: 1.5rem;">&times;</button>
            </div>
            <div style="padding: 20px; max-height: 70vh; overflow-y: auto;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div>
                        <h4 style="margin: 0 0 5px 0; font-size: 1.1rem; color: var(--dark-color);">张力 / 计算机科学与技术</h4>
                        <p style="margin: 0; font-size: 0.9rem; color: var(--text-color);">学号: 2018110101 | 班级: 计算机1801班</p>
                    </div>
                    <div style="text-align: right;">
                        <h4 style="margin: 0 0 5px 0; font-size: 1.1rem; color: var(--dark-color);">GPA: 3.8/4.0</h4>
                        <p style="margin: 0; font-size: 0.9rem; color: var(--text-color);">总学分: 156/150</p>
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <div style="margin-bottom: 20px; display: flex; align-items: center;">
                        <h4 style="margin: 0; font-size: 1rem; color: var(--dark-color);">成绩统计</h4>
                        <div style="margin-left: auto; display: flex; gap: 15px;">
                            <button id="download-transcript" style="padding: 6px 12px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center;">
                                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right: 5px;">
                                    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
                                </svg>
                                下载PDF
                            </button>
                            <button id="share-transcript" style="padding: 6px 12px; background-color: white; color: var(--primary-color); border: 1px solid var(--primary-color); border-radius: 5px; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center;">
                                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right: 5px;">
                                    <path d="M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z" />
                                </svg>
                                分享
                            </button>
                        </div>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; background-color: rgba(0, 0, 0, 0.02); padding: 15px; border-radius: 10px;">
                        <div style="text-align: center; flex: 1;">
                            <p style="margin: 0 0 5px 0; font-size: 0.85rem; color: var(--text-color);">A+ / A</p>
                            <p style="margin: 0; font-size: 1.2rem; font-weight: 500; color: var(--success-color);">75%</p>
                        </div>
                        <div style="text-align: center; flex: 1; border-left: 1px solid var(--border-color); border-right: 1px solid var(--border-color);">
                            <p style="margin: 0 0 5px 0; font-size: 0.85rem; color: var(--text-color);">B+ / B</p>
                            <p style="margin: 0; font-size: 1.2rem; font-weight: 500; color: var(--primary-color);">25%</p>
                        </div>
                        <div style="text-align: center; flex: 1;">
                            <p style="margin: 0 0 5px 0; font-size: 0.85rem; color: var(--text-color);">C+ 及以下</p>
                            <p style="margin: 0; font-size: 1.2rem; font-weight: 500; color: var(--text-color);">0%</p>
                        </div>
                    </div>
                </div>
                
                ${Object.keys(semesterGroups).map(semester => `
                    <div class="semester-group" style="margin-bottom: 25px;">
                        <h4 style="font-size: 1rem; color: var(--dark-color); margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px solid var(--border-color);">${semester}</h4>
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="background-color: rgba(0, 0, 0, 0.02);">
                                    <th style="padding: 10px; text-align: left; font-size: 0.85rem; font-weight: 500; color: var(--dark-color); border-bottom: 1px solid var(--border-color);">课程代码</th>
                                    <th style="padding: 10px; text-align: left; font-size: 0.85rem; font-weight: 500; color: var(--dark-color); border-bottom: 1px solid var(--border-color);">课程名称</th>
                                    <th style="padding: 10px; text-align: center; font-size: 0.85rem; font-weight: 500; color: var(--dark-color); border-bottom: 1px solid var(--border-color);">学分</th>
                                    <th style="padding: 10px; text-align: center; font-size: 0.85rem; font-weight: 500; color: var(--dark-color); border-bottom: 1px solid var(--border-color);">成绩</th>
                                    <th style="padding: 10px; text-align: center; font-size: 0.85rem; font-weight: 500; color: var(--dark-color); border-bottom: 1px solid var(--border-color);">等级</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${semesterGroups[semester].map(course => `
                                    <tr class="course-row" style="transition: background-color 0.3s;">
                                        <td style="padding: 10px; text-align: left; font-size: 0.85rem; color: var(--text-color); border-bottom: 1px solid var(--border-color);">${course.code}</td>
                                        <td style="padding: 10px; text-align: left; font-size: 0.85rem; color: var(--text-color); border-bottom: 1px solid var(--border-color);">${course.name}</td>
                                        <td style="padding: 10px; text-align: center; font-size: 0.85rem; color: var(--text-color); border-bottom: 1px solid var(--border-color);">${course.credit}</td>
                                        <td style="padding: 10px; text-align: center; font-size: 0.85rem; color: var(--text-color); border-bottom: 1px solid var(--border-color);">${course.score}</td>
                                        <td style="padding: 10px; text-align: center; font-size: 0.85rem; color: ${course.grade.includes('A') ? 'var(--success-color)' : course.grade.includes('B') ? 'var(--primary-color)' : 'var(--text-color)'}; font-weight: 500; border-bottom: 1px solid var(--border-color);">${course.grade}</td>
                                    </tr>
                                `).join('')}
                                <tr>
                                    <td colspan="2" style="padding: 10px; text-align: right; font-size: 0.85rem; font-weight: 500;">学期统计:</td>
                                    <td style="padding: 10px; text-align: center; font-size: 0.85rem; font-weight: 500;">${semesterGroups[semester].reduce((sum, course) => sum + course.credit, 0)}</td>
                                    <td style="padding: 10px; text-align: center; font-size: 0.85rem; font-weight: 500;">${(semesterGroups[semester].reduce((sum, course) => sum + course.score * course.credit, 0) / semesterGroups[semester].reduce((sum, course) => sum + course.credit, 0)).toFixed(1)}</td>
                                    <td style="padding: 10px; text-align: center; font-size: 0.85rem; font-weight: 500;">GPA: ${(semesterGroups[semester].reduce((sum, course) => {
                                        let gpa = 0;
                                        if (course.grade === 'A+') gpa = 4.0;
                                        else if (course.grade === 'A') gpa = 3.7;
                                        else if (course.grade === 'B+') gpa = 3.3;
                                        else if (course.grade === 'B') gpa = 3.0;
                                        return sum + gpa * course.credit;
                                    }, 0) / semesterGroups[semester].reduce((sum, course) => sum + course.credit, 0)).toFixed(2)}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                `).join('')}
                
                <div style="text-align: center; margin-top: 30px; padding: 15px; border-top: 1px solid var(--border-color);">
                    <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 10px;">
                        <svg viewBox="0 0 24 24" width="22" height="22" fill="var(--success-color)" style="margin-right: 10px;">
                            <path d="M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z" />
                        </svg>
                        <p style="margin: 0; font-size: 0.9rem; color: var(--success-color);">此成绩单已通过区块链验证，内容真实有效。</p>
                    </div>
                    <p style="margin: 0; font-size: 0.85rem; color: var(--text-color);">学链通大学教务处 2022-06-30</p>
                </div>
            </div>
        `;
        
        // 添加到文档
        document.body.appendChild(transcriptModal);
        
        // 关闭按钮事件由全局事件委托处理
        
        // 绑定下载PDF按钮事件
        document.getElementById('download-transcript').addEventListener('click', function() {
            showNotification('下载开始', '成绩单PDF下载已开始，请稍等片刻。', 'info');
            
            setTimeout(() => {
                showNotification('下载完成', '成绩单PDF已成功下载到您的设备。', 'success');
            }, 2000);
        });
        
        // 绑定分享按钮事件
        document.getElementById('share-transcript').addEventListener('click', function() {
            CertificateManager.copyToClipboard(window.location.href + '?transcript=2018110101');
            showNotification('分享成功', '成绩单链接已复制到剪贴板', 'success');
        });
        
        // 为课程行添加悬停效果
        document.querySelectorAll('.course-row').forEach(row => {
            row.addEventListener('mouseenter', function() {
                this.style.backgroundColor = 'rgba(0, 0, 0, 0.02)';
            });
            
            row.addEventListener('mouseleave', function() {
                this.style.backgroundColor = 'transparent';
            });
        });
    }
    
    // 查看研究项目
    function showResearchProjects() {
        // 创建研究项目模态框
        const researchModal = document.createElement('div');
        researchModal.id = 'research-modal';
        researchModal.className = 'modal';
        researchModal.style.cssText = 'display: block; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 10px; width: 90%; max-width: 800px; z-index: 120; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); overflow: hidden;';
        
        // 样例研究项目数据
        const projectsData = [
            {
                title: '基于区块链技术的教育证书管理系统',
                status: '进行中',
                progress: 70,
                description: '本项目旨在开发一个基于区块链技术的教育证书管理系统，解决传统证书容易伪造、验证困难等问题。系统将实现证书上链、多方验证、隐私保护等功能。',
                advisor: '李明教授',
                startDate: '2022-09',
                expectedEndDate: '2024-06'
            },
            {
                title: '教育数据共享隐私保护机制研究',
                status: '已完成',
                progress: 100,
                description: '本研究探讨了在教育数据共享过程中的隐私保护机制，提出了一种基于零知识证明的数据共享方案，有效解决了数据共享与隐私保护之间的矛盾。',
                advisor: '李明教授',
                startDate: '2022-09',
                endDate: '2024-06'
            }
        ];
        
        // 构建模态框内容
        researchModal.innerHTML = `
            <div style="padding: 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; font-size: 1.2rem; color: var(--dark-color);">研究项目</h3>
                <button class="modal-close-btn" style="background: none; border: none; cursor: pointer; color: var(--text-color); font-size: 1.5rem;">&times;</button>
            </div>
            <div style="padding: 20px; max-height: 70vh; overflow-y: auto;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div>
                        <h4 style="margin: 0 0 5px 0; font-size: 1.1rem; color: var(--dark-color);">张力 / 计算机科学与技术</h4>
                        <p style="margin: 0; font-size: 0.9rem; color: var(--text-color);">硕士研究生 | 导师: 李明教授</p>
                    </div>
                    <div style="text-align: right;">
                        <h4 style="margin: 0 0 5px 0; font-size: 1.1rem; color: var(--dark-color);">研究方向: 区块链技术与应用</h4>
                        <p style="margin: 0; font-size: 0.9rem; color: var(--text-color);">已修学分: 42/60</p>
                    </div>
                </div>
                
                <div class="research-projects">
                    ${projectsData.map(project => `
                        <div class="project-card" style="background-color: rgba(0, 0, 0, 0.02); border-radius: 10px; padding: 20px; margin-bottom: 20px; transition: transform 0.3s, box-shadow 0.3s;">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                                <h4 style="margin: 0; font-size: 1.1rem; color: var(--dark-color);">${project.title}</h4>
                                <span class="badge badge-${project.status === '进行中' ? 'warning' : 'success'}" style="padding: 5px 10px;">${project.status}</span>
                            </div>
                            <p style="font-size: 0.9rem; color: var(--text-color); margin-bottom: 15px;">${project.description}</p>
                            
                            <div style="margin-bottom: 15px;">
                                <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 5px;">研究进度</p>
                                <div style="display: flex; align-items: center;">
                                    <div style="flex: 1; height: 6px; background-color: var(--light-color); border-radius: 3px; overflow: hidden; margin-right: 10px;">
                                        <div style="height: 100%; width: ${project.progress}%; background-color: ${project.status === '进行中' ? 'var(--warning-color)' : 'var(--success-color)'};"></div>
                                    </div>
                                    <span style="font-size: 0.85rem; font-weight: 500; color: var(--dark-color);">${project.progress}%</span>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                                <div>
                                    <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">指导老师</p>
                                    <p style="font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">${project.advisor}</p>
                                </div>
                                <div>
                                    <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">开始时间</p>
                                    <p style="font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">${project.startDate}</p>
                                </div>
                                <div>
                                    <p style="font-size: 0.85rem; color: var(--text-color); margin-bottom: 3px;">${project.status === '进行中' ? '预计完成' : '完成时间'}</p>
                                    <p style="font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">${project.status === '进行中' ? project.expectedEndDate : project.endDate}</p>
                                </div>
                            </div>
                            
                            <div style="display: flex; justify-content: flex-end; gap: 10px;">
                                <button class="view-detail-btn" style="padding: 6px 12px; background-color: white; color: var(--primary-color); border: 1px solid var(--primary-color); border-radius: 5px; font-size: 0.9rem; cursor: pointer;">查看详情</button>
                                ${project.status === '已完成' ? `
                                    <button class="view-paper-btn" style="padding: 6px 12px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; font-size: 0.9rem; cursor: pointer;">阅读论文</button>
                                ` : ''}
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <h4 style="font-size: 1rem; color: var(--dark-color); margin-bottom: 15px;">课题组</h4>
                    <div style="display: flex; justify-content: center; gap: 20px;">
                        <div style="text-align: center;">
                            <div style="width: 60px; height: 60px; border-radius: 50%; background-color: var(--light-color); display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">
                                <svg viewBox="0 0 24 24" width="30" height="30" fill="var(--primary-color)">
                                    <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" />
                                </svg>
                            </div>
                            <p style="margin: 0; font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">李明教授</p>
                            <p style="margin: 0; font-size: 0.8rem; color: var(--text-color);">导师</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 60px; height: 60px; border-radius: 50%; background-color: var(--light-color); display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">
                                <svg viewBox="0 0 24 24" width="30" height="30" fill="var(--primary-color)">
                                    <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" />
                                </svg>
                            </div>
                            <p style="margin: 0; font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">王研</p>
                            <p style="margin: 0; font-size: 0.8rem; color: var(--text-color);">博士生</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 60px; height: 60px; border-radius: 50%; background-color: var(--light-color); display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">
                                <svg viewBox="0 0 24 24" width="30" height="30" fill="var(--primary-color)">
                                    <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" />
                                </svg>
                            </div>
                            <p style="margin: 0; font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">张力</p>
                            <p style="margin: 0; font-size: 0.8rem; color: var(--text-color);">硕士生</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 60px; height: 60px; border-radius: 50%; background-color: var(--light-color); display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">
                                <svg viewBox="0 0 24 24" width="30" height="30" fill="var(--primary-color)">
                                    <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" />
                                </svg>
                            </div>
                            <p style="margin: 0; font-size: 0.9rem; font-weight: 500; color: var(--dark-color);">李华</p>
                            <p style="margin: 0; font-size: 0.8rem; color: var(--text-color);">硕士生</p>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        // 添加到文档
        document.body.appendChild(researchModal);
        
        // 关闭按钮事件由全局事件委托处理
        
        // 为项目卡片添加悬停效果
        document.querySelectorAll('.project-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
                this.style.boxShadow = 'var(--shadow-md)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = 'none';
            });
        });
        
        // 绑定查看详情按钮事件
        document.querySelectorAll('.view-detail-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const projectTitle = this.closest('.project-card').querySelector('h4').textContent;
                showNotification('功能提示', `查看"${projectTitle}"详情功能即将上线`, 'info');
            });
        });
        
        // 绑定阅读论文按钮事件
        document.querySelectorAll('.view-paper-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const projectTitle = this.closest('.project-card').querySelector('h4').textContent;
                showNotification('下载开始', `"${projectTitle}"论文下载已开始，请稍等片刻。`, 'info');
                
                setTimeout(() => {
                    showNotification('下载完成', `"${projectTitle}"论文已成功下载到您的设备。`, 'success');
                }, 2000);
            });
        });
    }
    </script>

    <script>
    // 显示所有证书
    function showAllCertificates() {
        // 创建证书列表模态框
        const certificatesModal = document.createElement('div');
        certificatesModal.id = 'all-certificates-modal';
        certificatesModal.className = 'modal';
        certificatesModal.style.cssText = 'display: block; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 10px; width: 90%; max-width: 900px; z-index: 120; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); overflow: hidden;';
        
        // 样例证书数据
        const certificatesData = [
            {
                id: 1,
                type: '本科学历证书',
                school: '学链通大学',
                major: '计算机科学与技术',
                degree: '工学学士',
                graduationDate: '2022-06-30',
                verified: true
            },
            {
                id: 2,
                type: '硕士学历证书',
                school: '学链通大学',
                major: '计算机科学与技术',
                degree: '工学硕士',
                graduationDate: '在读',
                verified: true
            },
            {
                id: 3,
                type: '英语六级证书',
                school: 'CET',
                score: '625',
                date: '2020-12-20',
                verified: true
            },
            {
                id: 4,
                type: '计算机等级考试四级证书',
                school: 'NCRE',
                specification: '数据库工程师',
                date: '2021-03-15',
                verified: true
            }
        ];
        
        // 构建模态框内容
        certificatesModal.innerHTML = `
            <div style="padding: 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; font-size: 1.2rem; color: var(--dark-color);">全部证书</h3>
                <button class="modal-close-btn" style="background: none; border: none; cursor: pointer; color: var(--text-color); font-size: 1.5rem;">&times;</button>
            </div>
            <div style="padding: 20px; max-height: 70vh; overflow-y: auto;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h4 style="margin: 0; font-size: 1rem; color: var(--dark-color);">张力的证书 (${certificatesData.length})</h4>
                    <button id="add-certificate" style="padding: 8px 15px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center;">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right: 5px;">
                            <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
                        </svg>
                        添加证书
                    </button>
                </div>
                
                <div class="certificates-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px;">
                    ${certificatesData.map(cert => `
                        <div class="certificate-card-grid" style="background-color: rgba(0, 0, 0, 0.02); border-radius: 10px; padding: 20px; transition: transform 0.3s, box-shadow 0.3s; cursor: pointer; position: relative;">
                            ${cert.verified ? `
                                <div style="position: absolute; top: 15px; right: 15px;">
                                    <svg viewBox="0 0 24 24" width="22" height="22" fill="var(--success-color)">
                                        <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z" />
                                    </svg>
                                </div>
                            ` : ''}
                            
                            <div style="text-align: center; margin-bottom: 15px;">
                                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTIgMTlMMTkgMTIuNTM0NVY1TDEyIDExLjVMNSA1VjEyLjUzNDVMMTIgMTlaIiBzdHJva2U9IiMxQTI5ODAiIHN0cm9rZS13aWR0aD0iMiIgLz48L3N2Zz4=" alt="${cert.school}校徽" style="width: 60px; height: 60px;">
                                <h4 style="font-size: 1rem; font-weight: 600; color: var(--dark-color); margin: 10px 0 5px 0;">${cert.type}</h4>
                                <p style="font-size: 0.85rem; color: var(--text-color); margin: 0;">${cert.school}</p>
                            </div>
                            
                            <div style="background-color: rgba(255, 255, 255, 0.5); border-radius: 5px; padding: 10px; margin-bottom: 15px;">
                                ${cert.major ? `
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span style="font-size: 0.8rem; color: var(--text-color);">专业</span>
                                        <span style="font-size: 0.8rem; font-weight: 500; color: var(--dark-color);">${cert.major}</span>
                                    </div>
                                ` : ''}
                                
                                ${cert.degree ? `
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span style="font-size: 0.8rem; color: var(--text-color);">学位</span>
                                        <span style="font-size: 0.8rem; font-weight: 500; color: var(--dark-color);">${cert.degree}</span>
                                    </div>
                                ` : ''}
                                
                                ${cert.score ? `
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span style="font-size: 0.8rem; color: var(--text-color);">分数</span>
                                        <span style="font-size: 0.8rem; font-weight: 500; color: var(--dark-color);">${cert.score}</span>
                                    </div>
                                ` : ''}
                                
                                ${cert.specification ? `
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span style="font-size: 0.8rem; color: var(--text-color);">方向</span>
                                        <span style="font-size: 0.8rem; font-weight: 500; color: var(--dark-color);">${cert.specification}</span>
                                    </div>
                                ` : ''}
                                
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="font-size: 0.8rem; color: var(--text-color);">${cert.graduationDate ? '毕业时间' : '获得时间'}</span>
                                    <span style="font-size: 0.8rem; font-weight: 500; color: var(--dark-color);">${cert.graduationDate || cert.date}</span>
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 10px;">
                                <button class="view-cert-btn" data-id="${cert.id}" style="flex: 1; background-color: var(--primary-color); color: white; border: none; padding: 8px 0; border-radius: 5px; font-size: 0.8rem; cursor: pointer;">查看详情</button>
                                <button class="download-cert-btn" data-id="${cert.id}" style="flex: 1; background-color: white; color: var(--primary-color); border: 1px solid var(--primary-color); padding: 8px 0; border-radius: 5px; font-size: 0.8rem; cursor: pointer;">下载证书</button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
        
        // 添加到文档
        document.body.appendChild(certificatesModal);
        
        // 关闭按钮事件由全局事件委托处理
        
        // 为证书卡片添加悬停效果
        document.querySelectorAll('.certificate-card-grid').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
                this.style.boxShadow = 'var(--shadow-md)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = 'none';
            });
        });
        
        // 绑定查看详情按钮事件
        document.querySelectorAll('.view-cert-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const certId = parseInt(this.getAttribute('data-id'));
                const cert = certificatesData.find(c => c.id === certId);
                
                if (cert) {
                    // 关闭当前模态框
                    document.body.removeChild(certificatesModal);
                    
                    // 查找对应证书卡片并显示详情
                    if (cert.type === '本科学历证书' || cert.type === '硕士学历证书') {
                        const index = cert.type === '本科学历证书' ? 0 : 1;
                        const certificateCard = document.querySelectorAll('.card-body .certificate-card')[index];
                        if (certificateCard) {
                            showCertificateDetail(cert.type, certificateCard);
                        }
                } else {
                        showNotification('功能提示', `查看${cert.type}详情功能即将上线`, 'info');
                    }
                }
            });
        });
        
        // 绑定下载证书按钮事件
        document.querySelectorAll('.download-cert-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const certId = parseInt(this.getAttribute('data-id'));
                const cert = certificatesData.find(c => c.id === certId);
                
                if (cert) {
                    downloadCertificate(cert.type);
                }
            });
        });
        
        // 绑定添加证书按钮事件
        document.getElementById('add-certificate').addEventListener('click', function() {
            showAddCertificateDialog();
        });
    }
    
    // 显示添加证书对话框
    function showAddCertificateDialog() {
        // 创建添加证书对话框
        const addCertDialog = document.createElement('div');
        addCertDialog.id = 'add-certificate-dialog';
        addCertDialog.className = 'modal';
        addCertDialog.style.cssText = 'display: block; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 10px; width: 90%; max-width: 500px; z-index: 130; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); overflow: hidden;';
        
        // 构建对话框内容
        addCertDialog.innerHTML = `
            <div style="padding: 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; font-size: 1.2rem; color: var(--dark-color);">添加证书</h3>
                <button class="modal-close-btn" style="background: none; border: none; cursor: pointer; color: var(--text-color); font-size: 1.5rem;">&times;</button>
            </div>
            <div style="padding: 20px;">
                <div style="margin-bottom: 20px;">
                    <label for="cert-type" style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--dark-color);">证书类型</label>
                    <select id="cert-type" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                        <option value="">选择证书类型</option>
                        <option value="education">学历证书</option>
                        <option value="language">语言能力证书</option>
                        <option value="professional">职业资格证书</option>
                        <option value="competition">竞赛获奖证书</option>
                        <option value="other">其他证书</option>
                    </select>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="cert-name" style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--dark-color);">证书名称</label>
                    <input type="text" id="cert-name" placeholder="输入证书名称" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="cert-issuer" style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--dark-color);">颁发机构</label>
                    <input type="text" id="cert-issuer" placeholder="输入颁发机构" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="cert-date" style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--dark-color);">获得日期</label>
                    <input type="date" id="cert-date" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="cert-file" style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--dark-color);">上传证书</label>
                    <input type="file" id="cert-file" accept=".pdf,.jpg,.jpeg,.png" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 0.9rem;">
                    <p style="margin: 5px 0 0 0; font-size: 0.8rem; color: var(--text-color);">支持PDF、JPG、PNG格式，文件大小不超过10MB</p>
                </div>
                
                <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;">
                    <button id="cancel-add-cert" style="padding: 10px 20px; background-color: var(--light-color); color: var(--text-color); border: none; border-radius: 5px; font-size: 0.9rem; cursor: pointer;">取消</button>
                    <button id="submit-add-cert" style="padding: 10px 20px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; font-size: 0.9rem; cursor: pointer;">提交</button>
                </div>
            </div>
        `;
        
        // 添加到文档
        document.body.appendChild(addCertDialog);
        
        // 关闭按钮事件由全局事件委托处理
        
        // 绑定取消按钮事件
        document.getElementById('cancel-add-cert').addEventListener('click', function() {
            document.body.removeChild(addCertDialog);
        });
        
        // 绑定提交按钮事件
        document.getElementById('submit-add-cert').addEventListener('click', function() {
            const certType = document.getElementById('cert-type').value;
            const certName = document.getElementById('cert-name').value;
            const certIssuer = document.getElementById('cert-issuer').value;
            const certDate = document.getElementById('cert-date').value;
            const certFile = document.getElementById('cert-file').files[0];
            
            // 简单表单验证
            if (!certType || !certName || !certIssuer || !certDate) {
                showNotification('提交失败', '请填写完整的证书信息', 'error');
                return;
            }
            
            if (!certFile) {
                showNotification('提交失败', '请上传证书文件', 'error');
                return;
            }
            
            // 关闭对话框
            document.body.removeChild(addCertDialog);
            
            // 显示上传中通知
            showNotification('上传中', '正在上传证书文件，请稍等...', 'info');
            
            // 模拟上传过程
            setTimeout(() => {
                showNotification('上传成功', '证书已成功上传，等待审核', 'success');
                
                // 模拟添加新消息通知
                setTimeout(() => {
                    showNotification('新消息', '您的证书已提交成功，正在等待审核', 'info');
                }, 3000);
            }, 2000);
        });
    }
</script>

</html> 
</html> 